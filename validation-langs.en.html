<!DOCTYPE html><html class="formal-specification anolis" lang=en><head>
<title>Handling of unknown namespaces in conformance checking</title>
<link href=http://suika.suikawiki.org/www/style/html/spec rel=stylesheet>
<link href=#license rel=license>
</head>
<body class=has-abstract>

<header>

<hgroup>
  <h1 class="no-toc no-num">Handling of unknown namespaces in conformance checking</h1>
  <h2 class="no-toc no-num">Manakai Project Living Standard 3 December 2013</h2>
</hgroup>

<dl class=versions-uri>
<dt>Latest Version</dt>
  <dd><code class=URI>&lt;<a href=http://suika.suikawiki.org/www/markup/xml/atomdom>http://suika.suikawiki.org/www/markup/xml/validation-langs</a>&gt;</code></dd>
<dt id=version-history>Version History</dt>
  <dd><code class=URI>&lt;<a href=http://suika.suikawiki.org/gate/git/wi/markup/xmlexts.git/history/HEAD:/validation-langs-source.en.html>http://suika.suikawiki.org/gate/git/wi/markup/xmlexts.git/history/HEAD:/validation-langs-source.en.html</a>&gt;</code></dd>
<dt id=author>Author</dt>
  <dd><a href=http://suika.suikawiki.org/~wakaba/who? lang=ja rel=author>Wakaba</a>
  <code class=mail>&lt;<a href=mailto:wakaba@suikawiki.org rel=author>wakaba@suikawiki.org</a>&gt;</code></dd>
</dl>

<p class=copyright id=license lang=en><a href=http://creativecommons.org/publicdomain/zero/1.0/ rel=license><img alt=CC0 src=http://i.creativecommons.org/p/zero/1.0/80x15.png></a> To the
extent possible under law, the editor has waived all copyright and
related or neighboring rights to this work.  In addition, as of
3 December 2013, the editor has made this specification available under the <a href=http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0>Open
Web Foundation Agreement Version 1.0</a>.

</p></header>

<section id=status>
<h2 class="no-toc no-num" id=status-of-this-document>Status of This Document</h2>

<p class=section-info><em>This section describes the status of this
document at the time of its publication.  Other documents might
supersede this document.</em></p>

<p>This document is a technical specification produced as part of the
<a href=https://github.com/manakai>manakai project</a>.  It might be
updated, replaced, or obsoleted by other documents at any time.

</p><p>The scope of this specification is explicitly limited within the
manakai project.  It does not intended to be supported by multiple
parties, although nothing prevents it from implemented by other DOM
implementations.

</p><p>Comments on this document are welcome and may be sent to the <a href=#author>author</a>.</p>

<p>Translations of thie document might be available.  The English
version of the document is the only normative version.</p>
</section>

<section>
<h2 class="no-toc no-num" id=table-of-contents>Table of contents</h2>

<!--begin-toc-->
<ol class=toc>
 <li><a href=#introduction><span class=secno>1 </span>Introduction</a></li>
 <li><a href=#definitions><span class=secno>2 </span>Definitions</a></li>
 <li><a href=#validation-modes><span class=secno>3 </span>Validation modes</a></li>
 <li><a href=#unknown-namespaces><span class=secno>4 </span>Unknown namespaces</a></li>
 <li><a href=#rss-elements><span class=secno>5 </span>RSS elements</a></li>
 <li><a href=#document-element><span class=secno>6 </span>Document element</a></li>
 <li><a class=no-num href=#references>References</a></li></ol>
<!--end-toc-->
</section>

<section>
<h2 id=introduction><span class=secno>1 </span>Introduction</h2>

<p>This specification defines how elements and attributes in no
namespace and in unknown namespaces are handled by conformance
checkers developed by the <a href=https://github.com/manakai/>manakai project</a>.

</p></section>

<section>
<h2 id=definitions><span class=secno>2 </span>Definitions</h2>

<p>The keywords "<em class=rfc2119>MUST</em>" and "<em class=rfc2119>MAY</em>" in the normative parts of this document are to
be interpreted as described in <a href=http://tools.ietf.org/html/rfc2119>RFC 2119</a> <cite class="bibref normative">[<a href=#ref-RFC2119>RFC2119</a>]</cite>.

<!--
<p>Requirements phrased in the imperative as part of algorithms (such
as "strip any leading space characters" or "return false and abort
these steps") are to be interpreted with the meaning of the key word
("<em class=rfc2119>MUST</em>", "<em class=rfc2119>MAY</em>", etc)
used in introducing the algorithm.

<p>Conformance requirements phrased as algorithms or specific steps
<em class=rfc2119>MAY</em> be implemented in any manner, so long as
the end result is equivalent. (In particular, the algorithms defined
in this specification are intended to be easy to follow, and not
intended to be performant.)

<p>User agents <em class=rfc2119>MAY</em> impose
implementation-specific limits on otherwise unconstrained inputs,
e.g. to prevent denial of service attacks, to guard against running
out of memory, or to work around platform-specific limitations.
-->

</p><hr>

<p>User agent <em class=rfc2119>MUST</em> support DOM Standard <cite class="bibref normative">[<a href=#ref-DOM>DOM</a>]</cite>, HTML
Standard <cite class="bibref normative">[<a href=#ref-HTML>HTML</a>]</cite>, XML <cite class="bibref
normative">[<a href=#ref-XML>XML</a>]</cite>, and XML Namespaces
<cite class="bibref normative">[<a href=#ref-XMLNS>XMLNS</a>]</cite>.

</p><hr>

<p>The terms <dfn id=concept-tree-ancestor title=concept-tree-ancestor>ancestor</dfn>, <dfn id=concept-tree-child title=concept-tree-child>child</dfn>, <dfn id=concept-document title=concept-document>document</dfn>, <dfn id=concept-document-content-type title=concept-document-content-type>content type</dfn>, <dfn id=document-element-0>document
element</dfn>, <dfn id=concept-element title=concept-element>element</dfn>, <dfn id=concept-element-local-name title=concept-element-local-name>local name</dfn>, <dfn id=concept-element-namespace title=concept-element-namespace>namespace</dfn>, and <dfn id=concept-attribute title=concept-attribute>attribute</dfn> are defined by the DOM
Standard <cite class="bibref normative">[<a href=#ref-DOM>DOM</a>]</cite>.

</p><p>The term <dfn id=applicable-specification>applicable specification</dfn> is defined by the HTML
Standard <cite class="bibref normative">[<a href=#ref-HTML>HTML</a>]</cite>.

</p></section>

<section>
<h2 id=validation-modes><span class=secno>3 </span>Validation modes</h2>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Conformance checkers have three modes:

</p><dl>

<dt><dfn id=default-mode>Default mode</dfn>
</dt><dd>Conformance of elements are determined by their original
definition.

</dd><dt><dfn id=xslt-mode>XSLT mode</dfn>
</dt><dd>Conformance of elements are determined by XSLT 1.0 specification.

</dd><dt><dfn id=rdf-mode>RDF mode</dfn>
</dt><dd>Conformance of elements are determined by RDF/XML specification.

</dd></dl>

<p class=ed>XXX Should we also define RSS1 mode?

</p><p>A mode can invoke another mode for a subtree.  Examples of mode
"integration points" include:

</p><ul>

<li>If the <a href=#concept-document-content-type title=concept-document-content-type>content
type</a> of a <a href=#concept-document title=concept-document>document</a> is
<code>application/rdf+xml</code>, the <a href=#rdf-mode>RDF mode</a> is used
for the <a href=#concept-document title=concept-document>document</a>.

</li><li>Otherwise, if the <a href=#concept-document-content-type title=concept-document-content-type>content type</a> of a <a href=#concept-document title=concept-document>document</a> is
<code>application/xslt+xml</code> or <code>text/xsl</code>, the
<a href=#xslt-mode>XSLT mode</a> is used for the <a href=#concept-document title=concept-document>document</a>.

</li><li>Otherwise, the <a href=#default-mode>default mode</a> is used.

</li><li>If there is the <code><var>xsl</var>:version</code> attribute for
the <a href=#document-element-0>document element</a>, the <a href=#xslt-mode>XSLT mode</a> is used
for the subtree.

</li><li>If there is an element in the <span>XSLT namespace</span> in the
<a href=#default-mode>default mode</a>, the <a href=#xslt-mode>XSLT mode</a> is used for the
subtree.

</li><li>If there is an <code><var>rdf</var>:RDF</code> element in the
<a href=#default-mode>default mode</a>, the <a href=#rdf-mode>RDF mode</a> is used for the
subtree.

</li><li>If there is an <span>XML literal</span> element in the <a href=#rdf-mode>RDF
mode</a>, the <a href=#default-mode>default mode</a> is used for the content of
the element.

</li></ul>
<!-- <rdf:RDF xsl:version=""> document element can be interpreted as both RDF and XSLT -->

<p>Following sections define requirements for the <a href=#default-mode>default
mode</a>.

</p></section>

<section>
<h2 id=unknown-namespaces><span class=secno>4 </span>Unknown namespaces</h2>

<p>A non-null namespace is <dfn id=supported-namespace title="supported
namespace">supported</dfn> if it is defined by an <a href=#applicable-specification>applicable
specification</a> (other than this specification).

</p><p>A non-null namespace is <dfn id=unknown-namespace title="unknown
namespace">unknown</dfn> if it is not <a href=#supported-namespace title="supported
namespace">supported</a>.

</p><p>An <dfn id=unknown-namespace-element>unknown namespace element</dfn> is an <a href=#concept-element title=concept-element>element</a> in an <a href=#unknown-namespace>unknown
namespace</a> or in no namespace and is not an <a href=#rss2-element>RSS2
element</a>.

</p><p>An <dfn id=unknown-namespace-attribute>unknown namespace attribute</dfn> is an <a href=#concept-attribute title=concept-attribute>attribute</a> in an <a href=#unknown-namespace>unknown
namespace</a>.

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> or <a href=#unknown-namespace-attribute>unknown
namespace attribute</a> <em class=rfc2119>MUST NOT</em> be used
anywhere except where they are explicitly allowed.<!-- Somewhat
redundant with HTML Standard but still worth clarifying. -->

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> be used as the <a href=#document-element-0>document element</a> or
as an orphan node.  It <em class=rfc2119>MAY</em> also be used where
any kind of <a href=#concept-element title=concept-element>element</a> is allowed.

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> have any <a href=#concept-attribute title=concept-attribute>attribute</a> in no namespace or any
<a href=#unknown-namespace-attribute>unknown namespace attribute</a>.

</p><div class="note memo">

<p>Additionally, any <a href=#concept-attribute title=concept-attribute>attribute</a> in
a <a href=#supported-namespace>supported namespace</a> might also be specified to an
<a href=#unknown-namespace-element>unknown namespace element</a> as long as it is allowed by an
<a href=#applicable-specification>applicable specification</a>.

</p></div>

<p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> have any kind of <a href=#concept-tree-child title=concept-tree-child>child</a> (unless otherwise disallowed).

</p><p>Conformance checkers <em class=rfc2119>MAY</em> warn any
<a href=#unknown-namespace-element>unknown namespace element</a> or <a href=#unknown-namespace-attribute>unknown namespace
attribute</a> as use of it could be an authoring error.

</p></section>

<section>
<h2 id=rss-elements><span class=secno>5 </span>RSS elements</h2>

<p>An <a href=#concept-element title=concept-element>element</a> is an <dfn id=rss2-element>RSS2
element</dfn> if it is in no namespace and either it is the
<a href=#document-element-0>document element</a> and its <a href=#concept-element-local-name title=concept-element-local-name>local name</a> is <code>rss</code>
or one of its <a href=#concept-tree-ancestor title=concept-tree-ancestor>ancestor</a> is an
<a href=#rss2-element>RSS2 element</a>.

</p><div class="note memo">

<p>In other words, elements in no namespace are <a href=#rss2-element>RSS2
element</a> if they belong to the main document tree whose
<a href=#document-element-0>document element</a> is the <code>rss</code> element in no
namespace.

</p></div>

<p><a href=#rss2-element title="RSS2 element">RSS2 elements</a> are interpreted as
described by RSS2 specifications <cite class="bibref normative">[<a href=#ref-RSS2>RSS2</a>]</cite> <cite class="bibref normative">[<a href=#ref-RSSPROFILE>RSSPROFILE</a>]</cite>.

</p></section>

<section>
<h2 id=document-element><span class=secno>6 </span>Document element</h2>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Whether an element can be used as the <a href=#document-element-0>document element</a>
or not is determined by following steps:

</p><ol class=steps>

<li>If the element is in a <a href=#supported-namespace>supported namespace</a> and is
allowed as the <a href=#document-element-0>document element</a> by an <a href=#applicable-specification>applicable
specification</a>, return true.

</li><li>Otherwise, if the element is in the <a href=#xslt-mode>XSLT mode</a>, return
true.

</li><li>Otherwise, if the element is in the <a href=#rdf-mode>RDF mode</a>, return
true.

</li><li>Otherwise, if the element is the <code>rss</code> element in no
namespace, return true.

</li><li>Otherwise, if the element is an <a href=#unknown-namespace-element>unknown namespace
element</a>, return true.

</li><li>Otherwise, return false.

</li></ol>

</section>

<section class="reference normative">
<h2 class=no-num id=references>References</h2>

<dl>

<dt id=ref-DOM>DOM
</dt><dd><a href=http://dom.spec.whatwg.org/><cite>DOM</cite></a>, WHATWG Living Standard.

</dd><dt id=ref-HTML>HTML
</dt><dd><a href=http://c.whatwg.org/><cite>HTML</cite></a>, WHATWG Living Standard.

</dd><dt id=ref-RFC2119>RFC2119
</dt><dd><a href=http://tools.ietf.org/html/rfc2119><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>, IETF, RFC 2119, BCP 14.

</dd><dt id=ref-RSS2>RSS2
</dt><dd><a href=http://www.rssboard.org/rss-specification><cite>RSS 2.0</cite></a>, RSS Advisory Board.

</dd><dt id=ref-RSSPROFILE>RSSPROFILE
</dt><dd><a href=http://www.rssboard.org/rss-profile><cite>Really Simple Syndication Best Practices Profile</cite></a>, RSS Advisory Board.

</dd><dt id=ref-XML>XML
</dt><dd><a href=http://www.w3.org/TR/xml/><cite>Extensible Markup Language (XML)</cite></a>, W3C Recommendation.

</dd><dt id=ref-XMLNS>XMLNS
</dt><dd><a href=http://www.w3.org/TR/xml-names/><cite>Namespaces in XML</cite></a>, W3C Recommendation.

</dd></dl>

</section>
</body></html>