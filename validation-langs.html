<!DOCTYPE html><html class="formal-specification anolis" lang=en><head>
<title>Handling of unknown namespaces in conformance checking</title>
<meta charset=utf-8>
<link href=spec.css rel=stylesheet>
<link href=#license rel=license>
</head>
<body class=has-abstract>

<header>

<hgroup>
  <h1 class="no-toc no-num">Handling of unknown namespaces in conformance checking</h1>
  <h2 class="no-toc no-num">The manakai project, 21 April 2018</h2>
</hgroup>

<dl class=versions-uri>

<div>
<dt>Latest version
</dt><dd><a href=https://manakai.github.io/spec-dom/validation-langs>https://manakai.github.io/spec-dom/validation-langs</a>
</dd></div>

<div id=version-history>
<dt>Version history
</dt><dd><a href=https://github.com/manakai/spec-dom/commits/gh-pages>https://github.com/manakai/spec-dom/commits/gh-pages</a>
</dd></div>

</dl>

</header>

<section id=status>
<h1 class="no-toc no-num" id=status-of-this-document>Status of This Document</h1>

<p>This document is
a <a href=https://manakai.github.io/docs#specs>technical
specification</a> produced as part
of <a href=https://manakai.github.io/>the manakai project</a>.  It
might be updated, replaced, or obsoleted by other documents at any
time.

</p><p>The scope of this specification is limited to the products
within <a href=https://manakai.github.io/>the manakai project</a>.
It does not intended to be implemented by multiple parties, although
nothing prevents it from implemented by other DOM implementations.

</p><p>Comments on this document are welcome and may be sent to
the <a href=#author>author</a>.</p>

</section>

<section>
<h1 class="no-toc no-num" id=table-of-contents>Table of contents</h1>

<!--begin-toc-->
<ol class=toc>
 <li><a href=#introduction><span class=secno>1 </span>Introduction</a>
  <ol>
   <li><a href=#design-goals><span class=secno>1.1 </span>Design goals</a></li>
   <li><a href=#history-0><span class=secno>1.2 </span>History</a></li>
   <li><a href=#definitions><span class=secno>1.3 </span>Definitions</a></li>
   <li><a href=#unknown-namespaces><span class=secno>1.4 </span>Unknown namespaces</a></li>
   <li><a href=#rdf><span class=secno>1.5 </span>RDF</a></li>
   <li><a href=#rss-elements><span class=secno>1.6 </span>RSS elements</a></li>
   <li><a href=#atom-elements><span class=secno>1.7 </span>Atom elements</a></li>
   <li><a href=#ogp><span class=secno>1.8 </span>OGP</a></li>
   <li><a href=#validation-modes><span class=secno>1.9 </span>Validation modes</a>
    <ol>
     <li><a href=#document-element><span class=secno>1.9.1 </span>Document element</a></li>
     <li><a href=#checking-an-element><span class=secno>1.9.2 </span>Checking an element</a></li>
     <li><a href=#checking-an-html-script-element><span class=secno>1.9.3 </span>Checking an HTML <code>script</code> element</a></li>
     <li><a href=#checking-an-html-style-element><span class=secno>1.9.4 </span>Checking an HTML <code>style</code> element</a></li></ol></li>
   <li><a href=#data><span class=secno>1.10 </span>Data</a></li>
   <li><a class=no-num href=#references>References</a></li>
   <li><a class=no-num href=#author>Author</a></li></ol></li></ol>
<!--end-toc-->
</section>

<section>
<h2 id=introduction><span class=secno>1 </span>Introduction</h2>

<p class=section-info><em>This section is non-normative.</em>

</p><p>This specification defines how elements and attributes in no
namespace and in unknown namespaces are handled by conformance
checkers developed by <a href=http://manakai.github.io/>the manakai
project</a>.

</p><section>
<h3 id=design-goals><span class=secno>1.1 </span>Design goals</h3>

<p>Conformance checkers should report errors or warnings on unknown
elements and attributes useful for authors.

</p><p>This specification should not override any other specification's
requirements.

</p><p>For a public Web document, non-standard element which is not
defined by any <a href=#applicable-specification>applicable specification</a> should be
reported as an error.

</p><div class=example>

<p>In the following example, as the <code>bookmark</code> element in
the <code>http://mybookmark.example/</code> namespace is not defined
<!--as <span>flow content</span>--> by any <a href=#applicable-specification>applicable
specification</a>, this fragment is non-conforming:

</p><pre class=XML><code>&lt;div xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;bookmark xmlns="http://mybookmark.example/"&gt;Hello&lt;/bookmark&gt;
&lt;/div&gt;</code></pre>

</div>

<p>For XML data that is not expected to be directly shown to user
(e.g. an XML data retrieved via <code>XMLHttpRequest</code>), use of
null- or non-standard namespaces should not be an error.

</p><div class=example>

<p>For example, following document fragment should not be considered
as non-conforming, nevertheless none of <code>data</code> and
<code>item</code> elements and the <code>name</code> attribute is
defined by any public standard:

</p><pre class=XML><code>&lt;data&gt;
  &lt;item name="x1"/&gt;
  &lt;item name="x2"&gt;&lt;p xmlns="http://www.w3.org/1999/xhtml"&gt;Hi!&lt;/p&gt;&lt;/item&gt;
&lt;/data&gt;</code></pre>

<p>If the <code>p</code> element contained an <code>item</code>
element in no namespace, it should be reported as an error, as no
standard defines the <code>item</code> element in no namespace as
<span>phrasing content</span>.

</p></div>

<div class=example>

<p>If there is an element in the
<code>http://www.w3.org/2000/svg<mark>/</mark></code> namespace, an
error or warning should be reported.  It is likely an authoring error.

</p></div>

</section>

<section id=history>
  <h1 id=history-0><span class=secno>1.2 </span>History</h1>

  <p>This specification was originally published
  at <code class=URI>&lt;<a href=http://suika.suikawiki.org/www/markup/xml/validation-langs>http://suika.suikawiki.org/www/markup/xml/validation-langs</a>&gt;</code>.  <!-- and
  its history was at
  <http://suika.suikawiki.org/gate/git/wi/markup/xmlexts.git/history/HEAD:/validation-langs-source.en.html>
  -->

</p></section>

<section>
<h2 id=definitions><span class=secno>1.3 </span>Definitions</h2>

<p>The keywords "<em class=rfc2119>MUST</em>", "<em class=rfc2119>MUST
NOT</em>", "<em class=rfc2119>SHOULD</em>", "<em class=rfc2119>SHOULD
NOT</em>", and "<em class=rfc2119>MAY</em>" in the normative parts of
this document are to be interpreted as described in <a href=http://tools.ietf.org/html/rfc2119>RFC 2119</a> <cite class="bibref normative">[<a href=#ref-RFC2119>RFC2119</a>]</cite>.

</p><p>Requirements phrased in the imperative as part of algorithms (such
as "strip any leading space characters" or "return false and abort
these steps") are to be interpreted with the meaning of the key word
("<em class=rfc2119>MUST</em>", "<em class=rfc2119>MAY</em>", etc)
used in introducing the algorithm.

</p><p>Conformance requirements phrased as algorithms or specific steps
<em class=rfc2119>MAY</em> be implemented in any manner, so long as
the end result is equivalent. (In particular, the algorithms defined
in this specification are intended to be easy to follow, and not
intended to be performant.)

</p><p>For the purpose of this specification, user agents are conformance
checkers.

</p><p>User agents <em class=rfc2119>MAY</em> impose
implementation-specific limits on otherwise unconstrained inputs,
e.g. to prevent denial of service attacks, to guard against running
out of memory, or to work around platform-specific limitations.

</p><hr>

<p>User agents <em class=rfc2119>MUST</em> support DOM Standard <cite class="bibref normative">[<a href=#ref-DOM>DOM</a>]</cite>, HTML
Standard <cite class="bibref normative">[<a href=#ref-HTML>HTML</a>]</cite>, XML <cite class="bibref
normative">[<a href=#ref-XML>XML</a>]</cite>, and XML Namespaces
<cite class="bibref normative">[<a href=#ref-XMLNS>XMLNS</a>]</cite>.

</p><p>User agents are not required to implement other specifications, but
are expected to follow steps defined in this specification.  For
example, a user agent might not support XSLT, but is is still required
to detect whether an element is interpreted per XSLT specifications or
not as defined by this specification.

</p><hr>

<p>The terms <dfn id=concept-tree-ancestor title=concept-tree-ancestor>ancestor</dfn>, <dfn id=concept-tree-child title=concept-tree-child>child</dfn>, <dfn id=concept-document title=concept-document>document</dfn>, <dfn id=concept-document-content-type title=concept-document-content-type>content type</dfn>, <dfn id=html-document>HTML
document</dfn>, <dfn id=xhtml-document>XHTML document</dfn>, <dfn id=document-element-0>document
element</dfn>, <dfn id=concept-element title=concept-element>element</dfn>, <dfn id=concept-element-local-name title=concept-element-local-name>local name</dfn>, <dfn id=concept-element-namespace title=concept-element-namespace>namespace</dfn>, <dfn id=concept-attribute title=concept-attribute>attribute</dfn>, and <dfn id=xmlns-namespace>XMLNS
namespace</dfn> are defined by the DOM Standard <cite class="bibref
normative">[<a href=#ref-DOM>DOM</a>]</cite>.  Terms <dfn id=concept-comment title=concept-comment>comment</dfn> and <dfn id=concept-processing-instruction title=concept-processing-instruction>processing instruction</dfn>
refer to <code>Comment</code> and <code>ProcessingInstruction</code>
objects, respectively.

</p><p>The terms <dfn id=applicable-specification>applicable specification</dfn>, <dfn id=inter-element-whitespace>inter-element
whitespace</dfn>, <dfn id="the-script-block's-type">the script block's type</dfn>, and <dfn id=valid-e-mail-address>valid
e-mail address</dfn> are defined by the HTML Standard <cite class="bibref normative">[<a href=#ref-HTML>HTML</a>]</cite>.

</p><p>The terms <dfn id=valid-url>valid URL</dfn> and <dfn id=valid-absolute-url>valid absolute URL</dfn>
are defined by <a href=http://url.spec.whatwg.org/>URL Standard</a>
as <i>URL</i> and <i>absolute URL</i>, respectively.

</p><p>The term <dfn id=valid-mime-type>valid MIME type</dfn> is defined by <a href=http://mimesniff.spec.whatwg.org/>MIME Sniffing Standard</a> as
<i>parsable MIME type</i>.

The <dfn id=utf-8><code>utf-8</code></dfn> character encoding is defined by <a href=http://encoding.spec.whatwg.org/>Encoding Standard</a>.

</p><p>The term <dfn id=valid-language-tag>valid language tag</dfn> is defined by <a href=http://tools.ietf.org/html/bcp47>BCP 47</a>.

</p><p>The term <dfn id=date-construct>Date construct</dfn> is defined by <a href=http://tools.ietf.org/html/rfc4287>Atom 1.0 specification</a>.

</p><p>The <dfn id=xslt-namespace>XSLT namespace</dfn> is
<code>http://www.w3.org/1999/XSL/Transform</code>.

</p><p>The <dfn id=rdf-namespace>RDF namespace</dfn> is
<code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code>.

</p><p>The <dfn id=rss1-namespace>RSS1 namespace</dfn> is
<code>http://purl.org/rss/1.0/</code>.

</p><hr>

<p>When a value is required to match the production labeled
<code>document</code> in the XML specification<!-- <iframe srcdoc="">
in XML [HTML] -->, it <em class=rfc2119>MUST</em> also conform to
other requirements for XML documents.

</p></section>

<section>
<h2 id=unknown-namespaces><span class=secno>1.4 </span>Unknown namespaces</h2>

<p>A non-null namespace is <dfn id=supported-namespace title="supported
namespace">supported</dfn> if it is defined by an <a href=#applicable-specification>applicable
specification</a> (other than this specification).

</p><p>A non-null namespace is <dfn id=unknown-namespace title="unknown
namespace">unknown</dfn> if it is not <a href=#supported-namespace title="supported
namespace">supported</a>.

</p><p>An <dfn id=unknown-namespace-element>unknown namespace element</dfn> is an <a href=#concept-element title=concept-element>element</a> in an <a href=#unknown-namespace>unknown
namespace</a> or in no namespace and is not an <a href=#rss2-element>RSS2
element</a>.

</p><p>An <dfn id=unknown-namespace-attribute>unknown namespace attribute</dfn> is an <a href=#concept-attribute title=concept-attribute>attribute</a> in an <a href=#unknown-namespace>unknown
namespace</a>.

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> or <a href=#unknown-namespace-attribute>unknown
namespace attribute</a> <em class=rfc2119>MUST NOT</em> be used
anywhere except where they are explicitly allowed.<!-- Somewhat
redundant with HTML Standard but still worth clarifying. -->

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> be used as the <a href=#document-element-0>document element</a> or
as an orphan node.  It <em class=rfc2119>MAY</em> also be used where
any kind of <a href=#concept-element title=concept-element>element</a> is allowed.

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> have any <a href=#concept-attribute title=concept-attribute>attribute</a> in no namespace or any
<a href=#unknown-namespace-attribute>unknown namespace attribute</a>.

</p><div class="note memo">

<p>Additionally, any <a href=#concept-attribute title=concept-attribute>attribute</a> in
a <a href=#supported-namespace>supported namespace</a> might also be specified to an
<a href=#unknown-namespace-element>unknown namespace element</a> as long as it is allowed by an
<a href=#applicable-specification>applicable specification</a>.

</p></div>

<p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> have any kind of <a href=#concept-tree-child title=concept-tree-child>child</a> (unless otherwise disallowed).

</p><p>An <a href=#unknown-namespace-attribute>unknown namespace attribute</a> <em class=rfc2119>MAY</em> have any value.

</p><p>An attribute in no namespace of an <a href=#unknown-namespace-element>unknown namespace
element</a> <em class=rfc2119>MAY</em> have any value.

</p><p>Conformance checkers <em class=rfc2119>MAY</em> warn any
<a href=#unknown-namespace-element>unknown namespace element</a> or <a href=#unknown-namespace-attribute>unknown namespace
attribute</a> as use of it could be an authoring error.

</p></section>

<section>
<h2 id=rdf><span class=secno>1.5 </span>RDF</h2>

<p>The <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#h4_section-Infoset-Grammar-Action><dfn id=rdfxml-resolve title=rdfxml-resolve><code>resolve (<var>e</var>,
<var>s</var>)</code></dfn></a> grammer action in <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html>RDF/XML</a>
<em class=rfc2119>MUST</em> run the following steps:

  </p><ol class=steps>

  <li>Let <var title="">url</var> be the result of <a href=http://www.whatwg.org/specs/web-apps/current-work/#resolve-a-url>resolving</a>
  <var title="">s</var> relative to the <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#eventterm-element-base-uri>base-uri</a>
  accessor of <var title="">e</var>, using <i>character encoding</i>
  <a href=#utf-8><code>utf-8</code></a>.

  </li><li>If <var title="">url</var> is in error, return <var title="">s</var>.

  </li><li>Otherwise, return <var title="">url</var>.

  </li></ol>

<p>The value of RDF/XML attributes whose value is directly <a href=#rdfxml-resolve title=rdfxml-resolve>resolved</a> as an IRI reference <em class=rfc2119>MUST</em> be a <a href=#valid-url>valid URL</a>.

</p><p>For the purpose of the definition of <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#eventterm-element-children>children</a>
of an <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#h4_section-element-node>element
event</a> in RDF/XML specification, the <a href=#concept-tree-child title=concept-tree-child>children</a> of the element <em class=rfc2119>MUST</em> be considered as the value of the [children]
property of the element information item.

  </p><div class="note memo">

  <p>Therefore, <span>template content</span> of an HTML
  <code>template</code> element outside of <span>XML literal</span> is
  ignored.

  </p><p>As <code>template</code> element is not allowed in an RDF/XML
  document outside of <span>XML literal</span>, this does not affect
  any conforming RDF/XML document.

  </p></div>

<p>The <span>lexical form</span> of an <span>RDF literal</span> <em class=rfc2119>MUST</em> conform to the relevant requirements of the
<span>datatype</span> of the <span title="RDF literal">literal</span>
except when it is embedded in an RDF/XML fragment as <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#parseTypeLiteralPropertyElt><code>parseTypeLiteralPropertyElt</code></a>
or <a href=https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#parseTypeOtherPropertyElt><code>parseTypeOtherPropertyElt</code></a>.

  </p><div class="note memo">

  <p>An <span>XML literal</span> embedded using RDF/XML's feature is
  validated as part of the document.  Result of the validation might
  be different from the validation result of the <span>lexical
  form</span> if the <span>XML literal</span> is not self-contained.

  </p></div>

<p>If the <span>lexical form</span> of an <span>RDF literal</span> is
defined as an HTML or XML document (or a fragment of an HTML or XML
document), it <em class=rfc2119>MUST</em> be parsed with appropriate
<span>HTML parser</span> or <span>XML parser</span> with following
configurations:

  </p><ul>

  <li>The <code>Document</code> associated with the parser is not in
  any <span>browsing context</span>.

    <div class="note memo">

    <p>That is, no script is executed and no external resource is
    retrieved by the parser.

    </p></div>

  </li><li>If the parser has the <span>scripting flag</span>, whether it is
  set or not depends on the context in which the <span>lexical
  form</span> appears.  If it is contained in a <code>Node</code>, the
  <span>scripting flag</span> is set if and only if <span>scripting is
  enabled</span> for the <code>Node</code>.

  </li><li>If the parser is affected by locale, it is set to
  <code>en</code> (English).

  </li></ul>

</section>

<section>
<h2 id=rss-elements><span class=secno>1.6 </span>RSS elements</h2>

<p>An <a href=#concept-element title=concept-element>element</a> is an <dfn id=rss2-element>RSS2
element</dfn> if and only if it is in no namespace and either it is
the <a href=#document-element-0>document element</a> and its <a href=#concept-element-local-name title=concept-element-local-name>local name</a> is <code>rss</code>
or one of its <a href=#concept-tree-ancestor title=concept-tree-ancestor>ancestor</a> is an
<a href=#rss2-element>RSS2 element</a>.

</p><div class="note memo">

<p>In other words, <a href=#concept-element title=concept-element>elements</a> in no
namespace are <a href=#rss2-element>RSS2 element</a> if they belong to the main
document tree whose <a href=#document-element-0>document element</a> is the
<code>rss</code> element in no namespace.

</p></div>

<p><a href=#rss2-element title="RSS2 element">RSS2 elements</a> are interpreted as
described by RSS2 specifications <cite class="bibref normative">[<a href=#ref-RSS2>RSS2</a>]</cite> <cite class="bibref normative">[<a href=#ref-RSSPROFILE>RSSPROFILE</a>]</cite>.

</p></section>

<section>
<h2 id=atom-elements><span class=secno>1.7 </span>Atom elements</h2>

<p>Atom and its extension specifications allow extensions such that
almost everything is allowed, which is not useful for conformance
checker.  This specification defines stricter restrictions for the
purpose of conformance checking.

</p><p><dfn id=atom-family-namespaces>Atom family namespaces</dfn> are
<a href=https://github.com/mnot/I-D/blob/master/Published/atom-format/draft-nottingham-atom-format-02.xml><code>http://purl.org/atom/ns#</code></a>,
<a href=http://tools.ietf.org/html/rfc4287><code>http://www.w3.org/2005/Atom</code></a>,
<a href=http://tools.ietf.org/html/rfc4685><code>http://purl.org/syndication/thread/1.0</code></a>,
<a href=https://tools.ietf.org/html/rfc5005><code>http://purl.org/syndication/history/1.0</code></a>,
<a href=https://tools.ietf.org/html/rfc5023><code>http://www.w3.org/2007/app</code></a>,
and
<a href=http://tools.ietf.org/html/rfc6721><code>http://purl.org/atompub/tombstones/1.0</code></a>.

</p><p>An <dfn id=atom-family-element>Atom family element</dfn> is an <a href=#concept-element title=concept-element>element</a> in one of <a href=#atom-family-namespaces>Atom family
namespaces</a>.

</p><p>Constraints expressed in RELAX NG schema fragments in an <a href=#applicable-specification title="applicable specification">applicable specifications</a> for
<a href=#atom-family-namespaces>Atom family namespaces</a> are to be interpreted as <em class=rfc2119>MUST</em>-level requirements for the purpose of
conformance checking.

</p><p><a href=#concept-comment title=concept-comment>Comments</a>, <a href=#inter-element-whitespace title="inter-element whitespace">inter-element whitespaces</a>, and
<a href=#concept-processing-instruction title=concept-processing-instruction>processing
instructions</a> <em class=rfc2119>MAY</em> be inserted anywhere in
an <a href=#atom-family-element>Atom family element</a>.

</p><p>For an <a href=#atom-family-element>Atom family element</a>, an <a href=#concept-attribute title=concept-attribute>attribute</a> or <a href=#concept-tree-child title=concept-tree-child>child</a> that is not explicitly allowed
by an <a href=#applicable-specification>applicable specification</a> <em class=rfc2119>MUST
NOT</em> be used.

</p><p>An <a href=#unknown-namespace-element>unknown namespace element</a> <em class=rfc2119>MAY</em> be used as a <a href=#concept-tree-child title=concept-tree-child>child</a> of <dfn id=atom-extensible-element title="Atom extensible
element">Atom extensible elements</dfn>, i.e. following elements:

  </p><ul>

  <li><a href=#atom-family-element title="Atom family element">Atom family elements</a>
  which allow <span title="extension element">extension
  elements</span>, <code>extensionElement</code>, or
  <code>extensionSansTitleElement</code> in content

  </li><li><code>deleted-entry</code> elements in namespace
  <code>http://purl.org/atompub/tombstones/1.0</code>

  </li><li><code>feed</code> elements in namespace
  <code>http://purl.org/atom/ns#</code>

  </li><li><code>entry</code> elements in namespace
  <code>http://purl.org/atom/ns#</code>

  </li></ul>

<p>If the content of an <a href=#atom-family-element>Atom family element</a> is defined as
HTML or XHTML fragment, it <em class=rfc2119>MUST</em> conform to
relevant requirements in <a href=#applicable-specification title="applicable
specification">applicable specifications</a>, using the rules for
<a href=#html-document title="HTML document">HTML</a> or <a href=#xhtml-document title="XHTML
document">XHTML documents</a>, respectively.<!-- SHOULD in RFC
4287; HTML4 and XHTML1 in RFC 4287 -->

</p><p>Elements <code>complete</code> and <code>archive</code> in
namespace <code>http://purl.org/syndication/history/1.0</code> <em class=rfc2119>MUST NOT</em> be used more than once in an
<code>feed</code> element in namespace
<code>http://www.w3.org/2005/Atom</code>.

</p><p>Concepts used to describe constraints for <a href=#atom-family-element title="Atom family
element">Atom family elements</a> <em class=rfc2119>MUST</em> be
interpreted as following:

  </p><dl class=switch>

  <dt>RFC 3066 language tag
  </dt><dd><a href=#valid-language-tag>Valid language tag</a>

  </dd><dt>URI
  </dt><dt>IRI
  </dt><dt>IRI reference
  </dt><dd><a href=#valid-url>Valid URL</a> (If IRI and IRI reference are
  distinguished, <a href=#valid-absolute-url>valid absolute URL</a> and <a href=#valid-url>valid
  URL</a>, respectively.)

  </dd><dt>Media type
  </dt><dt>MIME media type
  </dt><dd><a href=#valid-mime-type>Valid MIME type</a>

  </dd><dt><code>addr-spec</code>
  </dt><dt>E-mail address
  </dt><dd><a href=#valid-e-mail-address>Valid e-mail address</a>

  </dd><dt>W3C Date-Time string
  </dt><dd>Same as element content of <a href=#date-construct>Date construct</a>

  </dd></dl>

<p class=ed>XXX need to define &lt;atom:content&gt; content validation
when type is a MIME type

</p></section>

<section>
<h2 id=ogp><span class=secno>1.8 </span>OGP</h2>

<p>An HTML <code>meta</code> element <em class=rfc2119>MAY</em> have a
<dfn id=attr-meta-property title=attr-meta-property><code>property</code></dfn> attribute.
If the attribute is specified, the element <em class=rfc2119>MUST
NOT</em> have a <code title=attr-meta-name>name</code> attribute or an
attribute that cannot be used when a <code title=attr-meta-name>name</code> attribute is specified.  The <code title=attr-meta-content>content</code> attribute <em class=rfc2119>MUST</em> be specified if a <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> attribute is specified.  An
HTML <code>meta</code> element with <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> attribute is <span>metadata
content</span> (it is not a <span>phrasing content</span>).

</p><p>The value of a <a href=#attr-meta-property><code title=attr-meta-property>property</code></a>
attribute <em class=rfc2119>MUST</em> be an <a href=#ogp-property-name>OGP property
name</a>.  A <dfn id=ogp-property-name>OGP property name</dfn> is a <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> value defined by an
<a href=#applicable-specification>applicable specification</a> or a <a href=#prefixed-property-value>prefixed property
value</a>.  A <dfn id=prefixed-property-value>prefixed property value</dfn> is a
<a href=#property-prefix>property prefix</a> followed by a <code>U+003A</code> <code class=charname>COLON</code> character (<code>:</code>) followed by one
or more characters.  A <dfn id=property-prefix>property prefix</dfn> is a string of one
or more characters that is not a <code>U+003A</code> <code class=charname>COLON</code> character (<code>:</code>) and is not used
by <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> value defined by an
<a href=#applicable-specification>applicable specification</a> as prefix.  A <i>deprecated</i>
<a href=#attr-meta-property><code title=attr-meta-property>property</code></a> value <em class=rfc2119>SHOULD NOT</em> be used.

</p><p>A <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> value <em class=rfc2119>MUST NOT</em> be used unless it is defined in the
context it is used by an <a href=#applicable-specification>applicable specification</a>.

  </p><div class="note memo">

  <p>Many <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> values are
  only defined for speciic <a href=#og:type><code>og:type</code></a> values.

  </p></div>

<p>If the <a href=#attr-meta-property><code title=attr-meta-property>property</code></a> attribute
value is <dfn id=og:type><code>og:type</code></dfn>, the <code title=attr-meta-content>content</code> attribute value <em class=rfc2119>MUST</em> be a value allowed as an <a href=#og:type><code>og:type</code></a>
value or a <a href=#prefixed-property-value>prefixed property value</a>.

  </p><div class="note memo">

  <p>An example of <a href=#applicable-specification title="applicable specification">applicable
  specifications</a> is <a href=http://ogp.me/><cite>The Open
  Graph protocol</cite></a>.

  </p></div>

</section>

<section>
<h2 id=validation-modes><span class=secno>1.9 </span>Validation modes</h2>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Conformance checking of a node tree is the process to traverse
nodes in the tree while checking the conformance of them.  Conformance
of nodes in the tree are checked in one of these <dfn id=validation-mode title="validation mode">modes</dfn>:

</p><dl>

<dt><dfn id=default-mode>Default mode</dfn>
</dt><dd>Conformance of <a href=#concept-element title=concept-element>elements</a> are
determined by their original definition.

</dd><dt><dfn id=xslt-mode>XSLT mode</dfn>
</dt><dd>Conformance of <a href=#concept-element title=concept-element>elements</a> are
determined by <a href=#xslt-specifications>XSLT specifications</a>.  <dfn id=xslt-specifications>XSLT
specifications</dfn> are any <a href=#applicable-specification title="applicable
specification">applicable specifications</a> defining XSLT and its
extensions.  <dfn id=xslt-family-element title="XSLT family element">XSLT family
elements</dfn> are <a href=#concept-element title=concept-element>elements</a> in the
<a href=#xslt-namespace>XSLT namespace</a> and XSLT <span title="extension
namespace">extension namespaces</span> defined by <a href=#xslt-specifications>XSLT
specifications</a>.  Note that XSLT <span title="literal result
element">literal result elements</span> are not <a href=#xslt-family-element title="XSLT
family element">XSLT family elements</a>.

</dd><dt><dfn id=rdf-mode>RDF mode</dfn>
</dt><dd>Conformance of <a href=#concept-element title=concept-element>elements</a> are
determined by RDF/XML specification.

</dd><dt><dfn id=rss1-mode>RSS1 mode</dfn>
</dt><dd>Conformance of <a href=#concept-element title=concept-element>elements</a> are
determined by both RDF/XML specification and <a href=#rss1-specifications>RSS1
specifications</a>.  <dfn id=rss1-specifications>RSS1 specifications</dfn> are any <a href=#applicable-specification title="applicable specification">applicable specifications</a>
defining RSS1 and its modules.

</dd></dl>

<p>The <a href=#validation-mode>validation mode</a> for a node can be <dfn id=determine-the-validation-mode title="determine the validation mode">determined</dfn> as follows:

</p><ol class=steps>

<li>If the node is the <a href=#document-element-0>document element</a>:

  <dl class=switch>

  <dt>If the <a href=#concept-document-content-type title=concept-document-content-type>content
  type</a> of the <span title=concept-node-document>document</span>
  of the node is <code>application/xml</code> or <code>text/xml</code>

  </dt><dd>

    <ol>

    <li>If the node is an XSLT <span>literal result element</span>,
    and the node has the <code>version</code> attribute in the
    <a href=#xslt-namespace>XSLT namespace</a>, return <a href=#xslt-mode>XSLT mode</a> and
    abort these steps.

    </li><li>Otherwise, go to the next step of the overall set of steps.

    </li></ol>

  </dd><dt>If the <a href=#concept-document-content-type title=concept-document-content-type>content
  type</a> of the <span title=concept-node-document>document</span>
  of the node is <code>application/xslt+xml</code> or
  <code>text/xsl</code>

  </dt><dd>

    <ol>

    <li>If the node is an <a href=#xslt-family-element>XSLT family element</a> or an XSLT
    <span>literal result element</span>, return <a href=#xslt-mode>XSLT mode</a>
    and abort these steps.

    </li><li>Otherwise, go to the next step of the overall set of steps.

    </li></ol>

  </dd><dt>If the <a href=#concept-document-content-type title=concept-document-content-type>content
  type</a> of the <span title=concept-node-document>document</span>
  of the node is <code>application/rdf+xml</code>

  </dt><dd>Return <a href=#rdf-mode>RDF mode</a> and abort these steps.

  </dd><dt>Otherwise

  </dt><dd>Go to the next step of the overall set of steps.

  </dd></dl>

</li><li>Let <var>parent mode</var> be the <a href=#validation-mode>validation mode</a> of
the parent of the node, if any, or <a href=#default-mode>default mode</a>.

</li><li>If <var>parent mode</var> is <a href=#rdf-mode>RDF mode</a> or <a href=#rss1-mode>RSS1
mode</a> and the parent of the node is an RSS/XML <span>XML
literal</span>, set <var>parent mode</var> to <a href=#default-mode>default
mode</a>.

</li><li>If the node is an <a href=#xslt-family-element>XSLT family element</a> or if
<var>parent mode</var> is <a href=#xslt-mode>XSLT mode</a> and the node is an
XSLT <span>literal result element</span>, return <a href=#xslt-mode>XSLT
mode</a> and abort these steps.

</li><li>If the node is the <code>RDF</code> element in the <a href=#rdf-namespace>RDF
namespace</a>:

  <ol>

  <li>If the node has the <code>xmlns</code> attribute in the
  <a href=#xmlns-namespace>XMLNS namespace</a> whose value is the <a href=#rss1-namespace>RSS1
  namespace</a> and the <code>rdf</code> attribute in the
  <a href=#xmlns-namespace>XMLNS namespace</a> whose value is the <a href=#rdf-namespace>RDF
  namespace</a>, return <a href=#rss1-mode>RSS1 mode</a> and abort these
  steps.

  </li><li>Otherwise, return <a href=#rdf-mode>RDF mode</a> and abort these steps.

  </li></ol>

</li><li>If <var>parent mode</var> is <a href=#rdf-mode>RDF mode</a> or <a href=#rss1-mode>RSS1
mode</a> and the node is considered as matching to a part of the
current production in the RDF/XML Syntax Data Model, return
<var>parent mode</var> and abort these steps.

</li><li>Return <a href=#default-mode>default mode</a>.

</li></ol>

<div class="note memo">

<p>Elements not conforming to the RDF/XML specification (e.g. an
element in string literal) are validated in <a href=#default-mode>default mode</a>.

</p></div>

<section>
<h3 id=document-element><span class=secno>1.9.1 </span>Document element</h3>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Whether an element can be used as the <a href=#document-element-0>document element</a>
or not is determined by following steps:

</p><ol class=steps>

<li><a href=#determine-the-validation-mode>Determine the validation mode</a> of the element.

</li><li>If the element is in the <a href=#xslt-mode>XSLT mode</a>, return whether
the element is allowed as the <a href=#document-element-0>document element</a> according
to <a href=#xslt-specifications>XSLT specifications</a>.

</li><li>Otherwise, if the element is in the <a href=#rdf-mode>RDF mode</a>, return
whether the element is allowed as the <a href=#document-element-0>document element</a>
according to RDF/XML specification.

</li><li>Otherwise, if the element is in the <a href=#rss1-mode>RSS1 mode</a>, in a
<a href=#supported-namespace>supported namespace</a>, or an <a href=#rss2-element>RSS2 element</a>,
return whether the element is allowed as the <a href=#document-element-0>document
element</a> by an <a href=#applicable-specification>applicable specification</a>.

</li><li>Otherwise, the element is an <a href=#unknown-namespace-element>unknown namespace
element</a>.  Return true.

</li></ol>

</section>

<section>
<h3 id=checking-an-element><span class=secno>1.9.2 </span>Checking an element</h3>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Conformance of an element is checked as follows:

</p><ol class=steps>

<li><a href=#determine-the-validation-mode>Determine the validation mode</a> of the element.

</li><li>Let <var>mode</var> be the <a href=#validation-mode>validation mode</a> of the
element.

</li><li>If <var>mode</var> is <a href=#xslt-mode>XSLT mode</a>, check the element
according to <a href=#xslt-specifications>XSLT specifications</a>.

</li><li>Otherwise, if <var>mode</var> is <a href=#rdf-mode>RDF mode</a>, check the
element according to the RDF/XML specification.

</li><li>Otherwise, if <var>mode</var> is <a href=#rss1-mode>RSS1 mode</a>, check the
element according to the RDF/XML specification and <a href=#rss1-specifications>RSS1
specifications</a>.

</li><li>Otherwise, if the element is in a <a href=#supported-namespace>supported namespace</a>
or is an <a href=#rss2-element>RSS2 element</a>:

  <ol>

  <li>If the element is defined in an <a href=#applicable-specification>applicable
  specification</a>, check the element according to the
  specification.

  </li><li>Otherwise, report an "unknown element" error.

  </li></ol>

</li><li>Otherwise, the element is an <a href=#unknown-namespace-element>unknown namespace
element</a>.  Report an "unknown element" warning.

</li></ol>

</section>

<section>
<h3 id=checking-an-html-script-element><span class=secno>1.9.3 </span>Checking an HTML <code>script</code> element</h3>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Conformance of an HTML <code>script</code> element is checked as
follows:

</p><ol class=steps>

<li>Check the conformance of the attributes.

</li><li>Check the content according to the <a href=http://www.whatwg.org/specs/web-apps/current-work/#restrictions-for-contents-of-script-elements>restrictions
for contents</a>.

</li><li>If the <code title=attr-script-src>src</code> attribute is
specified:

  <ol class=switch>

  <li>Check the content according to the restrictions on the <a href=http://www.whatwg.org/specs/web-apps/current-work/#inline-documentation-for-external-scripts>inline
  documentation</a>.

  </li><li>If <a href="#the-script-block's-type">the script block's type</a> is not a scripting
  language, report an error.

  </li><li>Report an "element not allowed" error for each child element in
  the content.

  </li><li>Check the referenced resource.

  </li></ol>

</li><li>Otherwise, if <a href="#the-script-block's-type">the script block's type</a> is an XML-based
language:

  <ol class=switch>

  <li>If the <a href="#the-script-block's-type" title="the script block's type">type</a> is
  supported, validate the content of the element according to the
  specification of the language.

  </li><li>Otherwise, report an "unknown language" warning.
  
  </li></ol>

</li><li>Otherwise:

  <ol class=switch>

  <li>Report an "element not allowed" error for each child element in
  the content.

  </li><li>If the <a href="#the-script-block's-type" title="the script block's type">type</a> is
  supported, validate the <code title=dom-script-text>text</code> of
  the element according to the specification of the language.

  </li><li>Otherwise, report an "unknown language" warning.
  
  </li></ol>

</li></ol>

</section>

<section>
<h3 id=checking-an-html-style-element><span class=secno>1.9.4 </span>Checking an HTML <code>style</code> element</h3>

<p class=section-info><em>This section is non-normative.</em>

</p><p>Conformance of an HTML <code>style</code> element is checked as
follows:

</p><ol class=steps>

<li>Check the conformance of the attributes.

</li><li>Check the content according to the restrictions for contents.

</li><li>If the type is an XML-based language:

  <ol class=switch>

  <li>If the type is supported, validate the content of the element
  according to the specification of the language.

  </li><li>Otherwise, report an "unknown language" warning.
  
  </li></ol>

</li><li>Otherwise:

  <ol class=switch>

  <li>Report an "element not allowed" error for each child element in
  the content.

  </li><li>If the type is supported, validate the concatenation of child
  text nodes, in tree order, of the element according to the
  specification of the language.

  </li><li>Otherwise, report an "unknown language" warning.
  
  </li></ol>

</li></ol>

</section>

</section>

<section>
<h2 id=data><span class=secno>1.10 </span>Data</h2>

<p class=section-info><em>This section is non-normative.</em>

</p><p>The <a href=https://github.com/manakai/data-web-defs/>data-web-defs</a>
repository contains some machine-readable data for definitions in this
specification.

</p><p>The tests-web repository contains <a href=https://github.com/wakaba/tests-web/tree/master/xml/validation>conformance
checking test data</a>.

</p></section>

<section class="reference normative">
<h2 class=no-num id=references>References</h2>

<dl>

<dt id=ref-DOM>DOM
</dt><dd><a href=http://dom.spec.whatwg.org/><cite>DOM</cite></a>, WHATWG Living Standard.

</dd><dt id=ref-HTML>HTML
</dt><dd><a href=http://c.whatwg.org/><cite>HTML</cite></a>, WHATWG Living Standard.

</dd><dt id=ref-RFC2119>RFC2119
</dt><dd><a href=http://tools.ietf.org/html/rfc2119><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>, IETF, RFC 2119, BCP 14.

</dd><dt id=ref-RSS2>RSS2
</dt><dd><a href=http://www.rssboard.org/rss-specification><cite>RSS 2.0</cite></a>, RSS Advisory Board.

</dd><dt id=ref-RSSPROFILE>RSSPROFILE
</dt><dd><a href=http://www.rssboard.org/rss-profile><cite>Really Simple Syndication Best Practices Profile</cite></a>, RSS Advisory Board.

</dd><dt id=ref-XML>XML
</dt><dd><a href=http://www.w3.org/TR/xml/><cite>Extensible Markup Language (XML)</cite></a>, W3C Recommendation.

</dd><dt id=ref-XMLNS>XMLNS
</dt><dd><a href=http://www.w3.org/TR/xml-names/><cite>Namespaces in XML</cite></a>, W3C Recommendation.

</dd></dl>

</section>


<section>
<h1 class=no-num id=author>Author</h1>

<p>This document is written by
<a href=https://suika.suikawiki.org/~wakaba/who?>Wakaba</a>
&lt;wakaba@suikawiki.org&gt;.

</p><p>This document is developed as part of the
<a href=https://manakai.github.io/>the manakai project</a>.

</p><p>Per
<a href=https://creativecommons.org/publicdomain/zero/1.0/>CC0</a>, to
the extent possible under law, the author has waived all copyright and
related or neighboring rights to this work.

</p></section>
</section></body></html>