<!DOCTYPE html>
<html lang="en" class="formal-specification anolis">
<head>
<title>DOM Validation</title>
<meta charset=utf-8>
<link rel=stylesheet href=spec.css>
<link rel="license" href="#license">
</head>
<body class="has-abstract">

<header>

<hgroup>
  <h1 class="no-toc no-num">DOM Validation</h1>
  <h2 class="no-toc no-num">The manakai project, [DATE]</h2>
</hgroup>

<dl class="versions-uri">

<div>
<dt>Latest version
<dd><a href=https://manakai.github.io/spec-dom/validation-langs>https://manakai.github.io/spec-dom/validation-langs</a>
</div>

<div id=version-history>
<dt>Version history
<dd><a href=https://github.com/manakai/spec-dom/commits/gh-pages/validation-langs-source.en.html>https://github.com/manakai/spec-dom/commits/gh-pages/validation-langs-source.en.html</a>
</div>

</dl>

</header>

<section id=status>
<h1 class="no-toc no-num">Status of This Document</h1>

<p>This document is
a <a href="https://manakai.github.io/docs#specs">technical
specification</a> produced as part
of <a href="https://manakai.github.io/">the manakai project</a>.  It
might be updated, replaced, or obsoleted by other documents at any
time.

<p>The scope of this specification is limited to the products
within <a href="https://manakai.github.io/">the manakai project</a>.
It does not intended to be implemented by multiple parties, although
nothing prevents it from implemented by other DOM implementations.

<p>Comments on this document are welcome and may be sent to
the <a href="#author">author</a>.</p>

</section>

<section>
<h1 class="no-toc no-num">Table of contents</h1>
<!-- toc -->
</section>

<section>
<h1>Introduction</h1>

<p class=section-info><em>This section is non-normative.</em>

<p>This specification defines details of DOM tree validation not
covered by other <span title="applicable specification">applicable
specifications</span>.

<section>
<h1>Design goals</h1>

<p>This specification intends to:

<ul>

<li>define how <span title=element>elements</span>
and <span title=attribute>attributes</span> <span>in no
namespace</span> and in <span title="unknown namespace">unknown
namespaces</span> are <span title=validate>validated</span>.

</ul>

</section>

<section id=history>
  <h1>History</h1>

  <p>This specification was originally published
  at <code class="URI">&lt;<a href="http://suika.suikawiki.org/www/markup/xml/validation-langs">http://suika.suikawiki.org/www/markup/xml/validation-langs</a>&gt;</code>
  as <cite>Handling of unknown namespaces in conformance
  checking</cite> since <time datetime=2013-12>December,
  2013</time>.  <!-- and its history was at
  <http://suika.suikawiki.org/gate/git/wi/markup/xmlexts.git/history/HEAD:/validation-langs-source.en.html>
  -->

  <p>Earlier versions of this specification contained non-normative
  descriptions of how to <span>validate</span>
  HTML <code id=checking-an-html-script-element>script</code>
  and <code id=checking-an-html-style-element>style</code> <span title=element>elements</span>.
  As definitions of these <span title=element>elements</span> were
  slightly simplified in the
  <a href=https://html.spec.whatwg.org><cite>HTML Standard</cite></a>,
  these descriptions were removed.

</section>

</section>

<section>
<h1>Infrastructure</h1>

<p>This specification depends on the
<a href=https://infra.spec.whatwg.org/><cite>Infra
Standard</cite></a>.
The term
<dfn>XMLNS namespace</dfn>
is defined by the <a href=https://infra.spec.whatwg.org/><cite>Infra
Standard</cite></a>.

<p>For the purpose of this specification, <dfn title="user agent">user
agents</dfn> are <span title="conformance checker">conformance
checkers</span>, also known
as <span title=validator>validators</span>.

<p><span title="user agent">User agents</span>
<em class=rfc2119>MUST</em> implement
the <a href="https://dom.spec.whatwg.org/"><cite>DOM
Standard</cite></a>.  Terms

<dfn title=concept-tree-ancestor>ancestor</dfn>, <dfn title=concept-tree-child>child</dfn>, <dfn title=concept-document>document</dfn>, <dfn title=concept-document-content-type>content
type</dfn>, <dfn>HTML document</dfn>, <dfn>XHTML
document</dfn>, <dfn>document
element</dfn>, 
<dfn>element</dfn>, <dfn title=concept-element-local-name>local
name</dfn>, 
<dfn>attribute</dfn>,
<dfn>namespace</dfn> (of <span>element</span> or <span>attribute</span>),
<dfn title=concept-comment>comment</dfn> (<dfn><code>Comment</code></dfn>),
and
<dfn title=concept-processing-instruction>processing instruction</dfn>
(<dfn><code>ProcessingInstruction</code></dfn>)

are defined by the <a href="https://dom.spec.whatwg.org/"><cite>DOM
Standard</cite></a>.


<p>User agents <em class=rfc2119>MUST</em> support HTML
Standard <cite class="bibref
normative">[<a href="#ref-HTML">HTML</a>]</cite>,
XML <cite class="bibref
normative">[<a href="#ref-XML">XML</a>]</cite>, and XML Namespaces
<cite class="bibref normative">[<a
href="#ref-XMLNS">XMLNS</a>]</cite>.

<p>User agents are not required to implement other specifications, but
are expected to follow steps defined in this specification.  For
example, a user agent might not support XSLT, but is is still required
to detect whether an element is interpreted per XSLT specifications or
not as defined by this specification.

<hr>

<p>The terms <dfn>applicable specification</dfn>, <dfn>inter-element
whitespace</dfn>, <dfn>the script block's type</dfn>, and <dfn>valid
e-mail address</dfn> are defined by the HTML Standard <cite
class="bibref normative">[<a href="#ref-HTML">HTML</a>]</cite>.

<p>The terms <dfn>valid URL</dfn> and <dfn>valid absolute URL</dfn>
are defined by <a href="http://url.spec.whatwg.org/">URL Standard</a>
as <i>URL</i> and <i>absolute URL</i>, respectively.

<p>The term <dfn>valid MIME type</dfn> is defined by <a
href="http://mimesniff.spec.whatwg.org/">MIME Sniffing Standard</a> as
<i>parsable MIME type</i>.

The <dfn><code>utf-8</code></dfn> character encoding is defined by <a
href="http://encoding.spec.whatwg.org/">Encoding Standard</a>.

<p>The term <dfn>valid language tag</dfn> is defined by <a
href="http://tools.ietf.org/html/bcp47">BCP 47</a>.

<p>The term <dfn>Date construct</dfn> is defined by <a
href="http://tools.ietf.org/html/rfc4287">Atom 1.0 specification</a>.

<p>The <dfn>XSLT namespace</dfn> is
<code>http://www.w3.org/1999/XSL/Transform</code>.

<p>The <dfn>RDF namespace</dfn> is
<code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code>.

<p>The <dfn>RSS1 namespace</dfn> is
<code>http://purl.org/rss/1.0/</code>.

<hr>

<p>When a value is required to match the production labeled
<code>document</code> in the XML specification<!-- <iframe srcdoc="">
in XML [HTML] -->, it <em class=rfc2119>MUST</em> also conform to
other requirements for XML documents.

</section>

<section>
<h1>Validation of unknown namespaces</h1>

<p>An <span>element</span> or <span>attribute</span> is <dfn>in no
namespace</dfn> <!-- or <dfn>in null namespace</dfn> --> if
its <span>namespace</span> is <code>null</code>.

<p>A <span>namespace</span> which is not <code>null</code>
is <dfn title="supported namespace">supported</dfn> if it is defined
by an <span>applicable specification</span> (other than this
specification).

<p>A <span>namespace</span> which is not <code>null</code>
is <dfn title="unknown namespace">unknown</dfn> if it is
not <span title="supported namespace">supported</span>.

<p>An <span>element</span> is <dfn>unknown namespace element</dfn> if
its <span>namespace</span> is <span title="unknown
namespace">unknown</span>, or it is <span>in no namespace</span> and
is not an <span>RSS2 element</span>.

<p>An <span>attribute</span> is <dfn>unknown namespace attribute</dfn>
if its <span>namespace</span> is <span title="unknown
namespace">unknown</span>.<!-- attribute in no namespace is not
unknown namespace attribute -->

<section>
<h1>Introduction</h1>

<p class=section-info><em>This section is non-normative.</em>

<p>Conformance checkers are expected to report errors or warnings on
unknown elements and attributes useful for authors.

<p>This specification is not intended to override any other
specification's requirements.

<p>For a public Web document, non-standard element which is not
defined by any <span>applicable specification</span> ought to be
reported as an error.

<div class=example>

<p>In the following example, as the <code>bookmark</code> element in
the <code>http://mybookmark.example/</code> namespace is not defined
<!--as <span>flow content</span>--> by any <span>applicable
specification</span>, this fragment is non-conforming:

<pre class=XML><code>&lt;div xmlns="http://www.w3.org/1999/xhtml">
  &lt;bookmark xmlns="http://mybookmark.example/">Hello&lt;/bookmark>
&lt;/div></code></pre>

</div>

<p>For XML data that is not expected to be directly shown to user
(e.g. an XML data retrieved via <code>XMLHttpRequest</code>), use of
null- or non-standard namespaces ought not to be an error.

<div class=example>

<p>For example, following document fragment should not be considered
as non-conforming, nevertheless none of <code>data</code> and
<code>item</code> elements and the <code>name</code> attribute is
defined by any public standard:

<pre class=XML><code>&lt;data>
  &lt;item name="x1"/>
  &lt;item name="x2">&lt;p xmlns="http://www.w3.org/1999/xhtml">Hi!&lt;/p>&lt;/item>
&lt;/data></code></pre>

<p>If the <code>p</code> element contained an <code>item</code>
element in no namespace, it ought to be reported as an error, as no
standard defines the <code>item</code> element in no namespace as
<span>phrasing content</span>.

</div>

<div class=example>

<p>If there is an element in the
<code>http://www.w3.org/2000/svg<mark>/</mark></code> namespace, an
error or warning ought to be reported.  It is likely an authoring
error.

</div>

</section>

<section>
<h1>Requirements</h1>

<p>An <span>unknown namespace element</span> or <span>unknown
namespace attribute</span> <em class=rfc2119>MUST NOT</em> be used
anywhere except where they are explicitly allowed.<!-- Somewhat
redundant with HTML Standard but still worth clarifying. -->

<p>An <span>unknown namespace element</span> <em
class=rfc2119>MAY</em> be used as the <span>document element</span> or
as an orphan node.  It <em class=rfc2119>MAY</em> also be used where
any kind of <span>element</span> is allowed.

<p>An <span>unknown namespace
element</span> <em class=rfc2119>MAY</em> have
any <span>attribute</span> in no namespace or any
<span>unknown namespace attribute</span>.

<div class="note memo">

<p>Additionally, any <span>attribute</span> in
a <span>supported namespace</span> might also be specified to an
<span>unknown namespace element</span> as long as it is allowed by an
<span>applicable specification</span>.

</div>

<p>An <span>unknown namespace element</span> <em
class=rfc2119>MAY</em> have any kind of <span
title=concept-tree-child>child</span> (unless otherwise disallowed).

<p>An <span>unknown namespace attribute</span> <em
class=rfc2119>MAY</em> have any value.

<p>An attribute in no namespace of an <span>unknown namespace
element</span> <em class=rfc2119>MAY</em> have any value.

<p>Conformance checkers <em class=rfc2119>MAY</em> warn any
<span>unknown namespace element</span> or <span>unknown namespace
attribute</span> as use of it could be an authoring error.

</section>

</section>

<section>
<h2>RDF</h2>

<p>The <a
href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#h4_section-Infoset-Grammar-Action"><dfn
title=rdfxml-resolve><code>resolve (<var>e</var>,
<var>s</var>)</code></dfn></a> grammer action in <a
href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html">RDF/XML</a>
<em class=rfc2119>MUST</em> run the following steps:

  <ol class=steps>

  <li>Let <var title>url</var> be the result of <a
  href="http://www.whatwg.org/specs/web-apps/current-work/#resolve-a-url">resolving</a>
  <var title>s</var> relative to the <a
  href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#eventterm-element-base-uri">base-uri</a>
  accessor of <var title>e</var>, using <i>character encoding</i>
  <code>utf-8</code>.

  <li>If <var title>url</var> is in error, return <var title>s</var>.

  <li>Otherwise, return <var title>url</var>.

  </ol>

<p>The value of RDF/XML attributes whose value is directly <span
title=rdfxml-resolve>resolved</span> as an IRI reference <em
class=rfc2119>MUST</em> be a <span>valid URL</span>.

<p>For the purpose of the definition of <a
href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#eventterm-element-children">children</a>
of an <a
href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#h4_section-element-node">element
event</a> in RDF/XML specification, the <span
title=concept-tree-child>children</span> of the element <em
class=rfc2119>MUST</em> be considered as the value of the [children]
property of the element information item.

  <div class="note memo">

  <p>Therefore, <span>template content</span> of an HTML
  <code>template</code> element outside of <span>XML literal</span> is
  ignored.

  <p>As <code>template</code> element is not allowed in an RDF/XML
  document outside of <span>XML literal</span>, this does not affect
  any conforming RDF/XML document.

  </div>

<p>The <span>lexical form</span> of an <span>RDF literal</span> <em
class=rfc2119>MUST</em> conform to the relevant requirements of the
<span>datatype</span> of the <span title="RDF literal">literal</span>
except when it is embedded in an RDF/XML fragment as <a
href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#parseTypeLiteralPropertyElt"><code>parseTypeLiteralPropertyElt</code></a>
or <a
href="https://dvcs.w3.org/hg/rdf/raw-file/default/rdf-xml/index.html#parseTypeOtherPropertyElt"><code>parseTypeOtherPropertyElt</code></a>.

  <div class="note memo">

  <p>An <span>XML literal</span> embedded using RDF/XML's feature is
  validated as part of the document.  Result of the validation might
  be different from the validation result of the <span>lexical
  form</span> if the <span>XML literal</span> is not self-contained.

  </div>

<p>If the <span>lexical form</span> of an <span>RDF literal</span> is
defined as an HTML or XML document (or a fragment of an HTML or XML
document), it <em class=rfc2119>MUST</em> be parsed with appropriate
<span>HTML parser</span> or <span>XML parser</span> with following
configurations:

  <ul>

  <li>The <code>Document</code> associated with the parser is not in
  any <span>browsing context</span>.

    <div class="note memo">

    <p>That is, no script is executed and no external resource is
    retrieved by the parser.

    </div>

  <li>If the parser has the <span>scripting flag</span>, whether it is
  set or not depends on the context in which the <span>lexical
  form</span> appears.  If it is contained in a <code>Node</code>, the
  <span>scripting flag</span> is set if and only if <span>scripting is
  enabled</span> for the <code>Node</code>.

  <li>If the parser is affected by locale, it is set to
  <code>en</code> (English).

  </ul>

</section>

<section>
<h2>RSS elements</h2>

<p>An <span>element</span> is an <dfn>RSS2
element</dfn> if and only if it is in no namespace and either it is
the <span>document element</span> and its <span
title=concept-element-local-name>local name</span> is <code>rss</code>
or one of its <span title=concept-tree-ancestor>ancestor</span> is an
<span>RSS2 element</span>.

<div class="note memo">

<p>In other words, <span>elements</span> in no
namespace are <span>RSS2 element</span> if they belong to the main
document tree whose <span>document element</span> is the
<code>rss</code> element in no namespace.

</div>

<p><span title="RSS2 element">RSS2 elements</span> are interpreted as
described by RSS2 specifications <cite class="bibref normative">[<a
href="#ref-RSS2">RSS2</a>]</cite> <cite class="bibref normative">[<a
href="#ref-RSSPROFILE">RSSPROFILE</a>]</cite>.

</section>

<section>
<h2>Atom elements</h2>

<p>Atom and its extension specifications allow extensions such that
almost everything is allowed, which is not useful for conformance
checker.  This specification defines stricter restrictions for the
purpose of conformance checking.

<p><dfn>Atom family namespaces</dfn> are
<a href="https://github.com/mnot/I-D/blob/master/Published/atom-format/draft-nottingham-atom-format-02.xml"><code>http://purl.org/atom/ns#</code></a>,
<a href="http://tools.ietf.org/html/rfc4287"><code>http://www.w3.org/2005/Atom</code></a>,
<a href="http://tools.ietf.org/html/rfc4685"><code>http://purl.org/syndication/thread/1.0</code></a>,
<a href="https://tools.ietf.org/html/rfc5005"><code>http://purl.org/syndication/history/1.0</code></a>,
<a href="https://tools.ietf.org/html/rfc5023"><code>http://www.w3.org/2007/app</code></a>,
and
<a href="http://tools.ietf.org/html/rfc6721"><code>http://purl.org/atompub/tombstones/1.0</code></a>.

<p>An <dfn>Atom family element</dfn> is an <span>element</span> in one
of <span>Atom family namespaces</span>.

<p>Constraints expressed in RELAX NG schema fragments in an <span
title="applicable specification">applicable specifications</span> for
<span>Atom family namespaces</span> are to be interpreted as <em
class=rfc2119>MUST</em>-level requirements for the purpose of
conformance checking.

<p><span title=concept-comment>Comments</span>, <span
title="inter-element whitespace">inter-element whitespaces</span>, and
<span title=concept-processing-instruction>processing
instructions</span> <em class=rfc2119>MAY</em> be inserted anywhere in
an <span>Atom family element</span>.

<p>For an <span>Atom family element</span>, an <span>attribute</span>
or <span title=concept-tree-child>child</span> that is not explicitly
allowed by an <span>applicable
specification</span> <em class=rfc2119>MUST NOT</em> be used.

<p>An <span>unknown namespace element</span> <em
class=rfc2119>MAY</em> be used as a <span
title=concept-tree-child>child</span> of <dfn title="Atom extensible
element">Atom extensible elements</dfn>, i.e. following elements:

  <ul>

  <li><span title="Atom family element">Atom family elements</span>
  which allow <span title="extension element">extension
  elements</span>, <code>extensionElement</code>, or
  <code>extensionSansTitleElement</code> in content

  <li><code>deleted-entry</code> elements in namespace
  <code>http://purl.org/atompub/tombstones/1.0</code>

  <li><code>feed</code> elements in namespace
  <code>http://purl.org/atom/ns#</code>

  <li><code>entry</code> elements in namespace
  <code>http://purl.org/atom/ns#</code>

  </ul>

<p>If the content of an <span>Atom family element</span> is defined as
HTML or XHTML fragment, it <em class=rfc2119>MUST</em> conform to
relevant requirements in <span title="applicable
specification">applicable specifications</span>, using the rules for
<span title="HTML document">HTML</span> or <span title="XHTML
document">XHTML documents</span>, respectively.<!-- SHOULD in RFC
4287; HTML4 and XHTML1 in RFC 4287 -->

<p>Elements <code>complete</code> and <code>archive</code> in
namespace <code>http://purl.org/syndication/history/1.0</code> <em
class=rfc2119>MUST NOT</em> be used more than once in an
<code>feed</code> element in namespace
<code>http://www.w3.org/2005/Atom</code>.

<p>Concepts used to describe constraints for <span title="Atom family
element">Atom family elements</span> <em class=rfc2119>MUST</em> be
interpreted as following:

  <dl class=switch>

  <dt>RFC 3066 language tag
  <dd><span>Valid language tag</span>

  <dt>URI
  <dt>IRI
  <dt>IRI reference
  <dd><span>Valid URL</span> (If IRI and IRI reference are
  distinguished, <span>valid absolute URL</span> and <span>valid
  URL</span>, respectively.)

  <dt>Media type
  <dt>MIME media type
  <dd><span>Valid MIME type</span>

  <dt><code>addr-spec</code>
  <dt>E-mail address
  <dd><span>Valid e-mail address</span>

  <dt>W3C Date-Time string
  <dd>Same as element content of <span>Date construct</span>

  </dl>

<p class=ed>XXX need to define &lt;atom:content> content validation
when type is a MIME type

</section>

<section>
<h2>OGP</h2>

<p>An HTML <code>meta</code> element <em class=rfc2119>MAY</em> have a
<dfn title=attr-meta-property><code>property</code></dfn> attribute.
If the attribute is specified, the element <em class=rfc2119>MUST
NOT</em> have a <code title=attr-meta-name>name</code> attribute or an
attribute that cannot be used when a <code
title=attr-meta-name>name</code> attribute is specified.  The <code
title=attr-meta-content>content</code> attribute <em
class=rfc2119>MUST</em> be specified if a <code
title=attr-meta-property>property</code> attribute is specified.  An
HTML <code>meta</code> element with <code
title=attr-meta-property>property</code> attribute is <span>metadata
content</span> (it is not a <span>phrasing content</span>).

<p>The value of a <code title=attr-meta-property>property</code>
attribute <em class=rfc2119>MUST</em> be an <span>OGP property
name</span>.  A <dfn>OGP property name</dfn> is a <code
title=attr-meta-property>property</code> value defined by an
<span>applicable specification</span> or a <span>prefixed property
value</span>.  A <dfn>prefixed property value</dfn> is a
<span>property prefix</span> followed by a <code>U+003A</code> <code
class=charname>COLON</code> character (<code>:</code>) followed by one
or more characters.  A <dfn>property prefix</dfn> is a string of one
or more characters that is not a <code>U+003A</code> <code
class=charname>COLON</code> character (<code>:</code>) and is not used
by <code title=attr-meta-property>property</code> value defined by an
<span>applicable specification</span> as prefix.  A <i>deprecated</i>
<code title=attr-meta-property>property</code> value <em
class=rfc2119>SHOULD NOT</em> be used.

<p>A <code title=attr-meta-property>property</code> value <em
class=rfc2119>MUST NOT</em> be used unless it is defined in the
context it is used by an <span>applicable specification</span>.

  <div class="note memo">

  <p>Many <code title=attr-meta-property>property</code> values are
  only defined for speciic <code>og:type</code> values.

  </div>

<p>If the <code title=attr-meta-property>property</code> attribute
value is <dfn><code>og:type</code></dfn>, the <code
title=attr-meta-content>content</code> attribute value <em
class=rfc2119>MUST</em> be a value allowed as an <code>og:type</code>
value or a <span>prefixed property value</span>.

  <div class="note memo">

  <p>An example of <span title="applicable specification">applicable
  specifications</span> is <a href="http://ogp.me/"><cite>The Open
  Graph protocol</cite></a>.

  </div>

</section>

<section>
<h2>Validation modes</h2>

<p class=section-info><em>This section is non-normative.</em>

<p>Conformance checking of a node tree is the process to traverse
nodes in the tree while checking the conformance of them.  Conformance
of nodes in the tree are checked in one of these <dfn
title="validation mode">modes</dfn>:

<dl>

<dt><dfn>Default mode</dfn>
<dd>Conformance of <span>elements</span> are
determined by their original definition.

<dt><dfn>XSLT mode</dfn>
<dd>Conformance of <span>elements</span> are
determined by <span>XSLT specifications</span>.  <dfn>XSLT
specifications</dfn> are any <span title="applicable
specification">applicable specifications</span> defining XSLT and its
extensions.  <dfn title="XSLT family element">XSLT family
elements</dfn> are <span>elements</span> in the
<span>XSLT namespace</span> and XSLT <span title="extension
namespace">extension namespaces</span> defined by <span>XSLT
specifications</span>.  Note that XSLT <span title="literal result
element">literal result elements</span> are not <span title="XSLT
family element">XSLT family elements</span>.

<dt><dfn>RDF mode</dfn>
<dd>Conformance of <span>elements</span> are
determined by RDF/XML specification.

<dt><dfn>RSS1 mode</dfn>
<dd>Conformance of <span>elements</span> are
determined by both RDF/XML specification and <span>RSS1
specifications</span>.  <dfn>RSS1 specifications</dfn> are any <span
title="applicable specification">applicable specifications</span>
defining RSS1 and its modules.

</dl>

<p>The <span>validation mode</span> for a node can be <dfn
title="determine the validation mode">determined</dfn> as follows:

<ol class=steps>

<li>If the node is the <span>document element</span>:

  <dl class=switch>

  <dt>If the <span title=concept-document-content-type>content
  type</span> of the <span title=concept-node-document>document</span>
  of the node is <code>application/xml</code> or <code>text/xml</code>

  <dd>

    <ol>

    <li>If the node is an XSLT <span>literal result element</span>,
    and the node has the <code>version</code> attribute in the
    <span>XSLT namespace</span>, return <span>XSLT mode</span> and
    abort these steps.

    <li>Otherwise, go to the next step of the overall set of steps.

    </ol>

  <dt>If the <span title=concept-document-content-type>content
  type</span> of the <span title=concept-node-document>document</span>
  of the node is <code>application/xslt+xml</code> or
  <code>text/xsl</code>

  <dd>

    <ol>

    <li>If the node is an <span>XSLT family element</span> or an XSLT
    <span>literal result element</span>, return <span>XSLT mode</span>
    and abort these steps.

    <li>Otherwise, go to the next step of the overall set of steps.

    </ol>

  <dt>If the <span title=concept-document-content-type>content
  type</span> of the <span title=concept-node-document>document</span>
  of the node is <code>application/rdf+xml</code>

  <dd>Return <span>RDF mode</span> and abort these steps.

  <dt>Otherwise

  <dd>Go to the next step of the overall set of steps.

  </dl>

<li>Let <var>parent mode</var> be the <span>validation mode</span> of
the parent of the node, if any, or <span>default mode</span>.

<li>If <var>parent mode</var> is <span>RDF mode</span> or <span>RSS1
mode</span> and the parent of the node is an RSS/XML <span>XML
literal</span>, set <var>parent mode</var> to <span>default
mode</span>.

<li>If the node is an <span>XSLT family element</span> or if
<var>parent mode</var> is <span>XSLT mode</span> and the node is an
XSLT <span>literal result element</span>, return <span>XSLT
mode</span> and abort these steps.

<li>If the node is the <code>RDF</code> element in the <span>RDF
namespace</span>:

  <ol>

  <li>If the node has the <code>xmlns</code> attribute in the
  <span>XMLNS namespace</span> whose value is the <span>RSS1
  namespace</span> and the <code>rdf</code> attribute in the
  <span>XMLNS namespace</span> whose value is the <span>RDF
  namespace</span>, return <span>RSS1 mode</span> and abort these
  steps.

  <li>Otherwise, return <span>RDF mode</span> and abort these steps.

  </ol>

<li>If <var>parent mode</var> is <span>RDF mode</span> or <span>RSS1
mode</span> and the node is considered as matching to a part of the
current production in the RDF/XML Syntax Data Model, return
<var>parent mode</var> and abort these steps.

<li>Return <span>default mode</span>.

</ol>

<div class="note memo">

<p>Elements not conforming to the RDF/XML specification (e.g. an
element in string literal) are validated in <span>default mode</span>.

</div>

<section>
<h3>Document element</h3>

<p class=section-info><em>This section is non-normative.</em>

<p>Whether an element can be used as the <span>document element</span>
or not is determined by following steps:

<ol class=steps>

<li><span>Determine the validation mode</span> of the element.

<li>If the element is in the <span>XSLT mode</span>, return whether
the element is allowed as the <span>document element</span> according
to <span>XSLT specifications</span>.

<li>Otherwise, if the element is in the <span>RDF mode</span>, return
whether the element is allowed as the <span>document element</span>
according to RDF/XML specification.

<li>Otherwise, if the element is in the <span>RSS1 mode</span>, in a
<span>supported namespace</span>, or an <span>RSS2 element</span>,
return whether the element is allowed as the <span>document
element</span> by an <span>applicable specification</span>.

<li>Otherwise, the element is an <span>unknown namespace
element</span>.  Return true.

</ol>

</section>

<section>
<h3>Checking an element</h3>

<p class=section-info><em>This section is non-normative.</em>

<p>Conformance of an element is checked as follows:

<ol class=steps>

<li><span>Determine the validation mode</span> of the element.

<li>Let <var>mode</var> be the <span>validation mode</span> of the
element.

<li>If <var>mode</var> is <span>XSLT mode</span>, check the element
according to <span>XSLT specifications</span>.

<li>Otherwise, if <var>mode</var> is <span>RDF mode</span>, check the
element according to the RDF/XML specification.

<li>Otherwise, if <var>mode</var> is <span>RSS1 mode</span>, check the
element according to the RDF/XML specification and <span>RSS1
specifications</span>.

<li>Otherwise, if the element is in a <span>supported namespace</span>
or is an <span>RSS2 element</span>:

  <ol>

  <li>If the element is defined in an <span>applicable
  specification</span>, check the element according to the
  specification.

  <li>Otherwise, report an "unknown element" error.

  </ol>

<li>Otherwise, the element is an <span>unknown namespace
element</span>.  Report an "unknown element" warning.

</ol>

</section>

</section>

<section>
<h2>Data</h2>

<p class=section-info><em>This section is non-normative.</em>

<p>The <a
href="https://github.com/manakai/data-web-defs/">data-web-defs</a>
repository contains some machine-readable data for definitions in this
specification.

<p>The tests-web repository contains <a
href="https://github.com/wakaba/tests-web/tree/master/xml/validation">conformance
checking test data</a>.

</section>

<section class="reference normative">
<h2 class=no-num>References</h2>

<dl>

<dt id=ref-HTML>HTML
<dd><a href="http://c.whatwg.org/"><cite>HTML</cite></a>, WHATWG Living Standard.

<dt id=ref-RSS2>RSS2
<dd><a href="http://www.rssboard.org/rss-specification"><cite>RSS 2.0</cite></a>, RSS Advisory Board.

<dt id=ref-RSSPROFILE>RSSPROFILE
<dd><a href="http://www.rssboard.org/rss-profile"><cite>Really Simple Syndication Best Practices Profile</cite></a>, RSS Advisory Board.

<dt id=ref-XML>XML
<dd><a href="http://www.w3.org/TR/xml/"><cite>Extensible Markup Language (XML)</cite></a>, W3C Recommendation.

<dt id=ref-XMLNS>XMLNS
<dd><a href="http://www.w3.org/TR/xml-names/"><cite>Namespaces in XML</cite></a>, W3C Recommendation.

</dl>

</section>


<section>
<h1 class=no-num id=author>Author</h1>

<p>This document is written by
<a href=https://suika.suikawiki.org/~wakaba/who?>Wakaba</a>
&lt;wakaba@suikawiki.org&gt;.

<p>This document is developed as part of the
<a href=https://manakai.github.io/>the manakai project</a>.

<p>Per
<a href=https://creativecommons.org/publicdomain/zero/1.0/>CC0</a>, to
the extent possible under law, the author has waived all copyright and
related or neighboring rights to this work.

</section>
