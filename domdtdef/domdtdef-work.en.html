<!DOCTYPE html>
<html lang="en" class="formal-specification status-work-in-progress">
<head>
<title>DOM Document Type Definition Module</title>
<link rel="stylesheet" href="http://suika.fam.cx/www/style/html/spec">
<link rel="stylesheet" href="http://suika.fam.cx/www/style/def/dom">
<link rel="license" href="http://suika.fam.cx/c/gnu/fdl">
</head>
<body class="has-abstract">

<div class="header">
<h1>DOM Document Type Definition Module</h1>
<h2>Working Draft <time datetime=2007-12-03>3 December 2007</time></h2>

<dl class="versions-uri">
<dt>This Version</dt>
  <dd><code class="URI">&lt;<a href="http://suika.fam.cx/www/markup/xml/domdtdef/domdtdef-work"
      >http://suika.fam.cx/www/markup/xml/domdtdef/domdtdef-work</a>&gt;</code></dd>
<dt>Latest Version</dt>
  <dd><code class="URI">&lt;<a href="http://suika.fam.cx/www/markup/xml/domdtdef/domdtdef"
      >http://suika.fam.cx/www/markup/xml/domdtdef/domdtdef</a>&gt;</code></dd>
<dt>Latest Working Draft</dt>
  <dd><code class="URI">&lt;<a href="http://suika.fam.cx/www/markup/xml/domdtdef/domdtdef-work"
      >http://suika.fam.cx/www/markup/xml/domdtdef/domdtdef-work</a>&gt;</code></dd>
<!-- <dt>Previous Version</dt> -->
<dt>Version History</dt>
  <dd><code class=URI>&lt;<a href="http://suika.fam.cx/gate/cvs/markup/xml/domdtdef/domdtdef-work.en.html">http://suika.fam.cx/gate/cvs/markup/xml/domdtdef/domdtdef-work.en.html</a>&gt;</code></dd>
<dt id=author>Author</dt>
  <dd><a href="http://suika.fam.cx/~wakaba/who?" rel="author"
      lang=ja>Wakaba</a>
  <code class="mail">&lt;<a href="mailto:w@suika.fam.cx" rel="author"
      >w@suika.fam.cx</a>&gt;</code></dd>
</dl>

<p class="copyright" lang="en">&#xA9; <time>2007</time> <a
    href="http://suika.fam.cx/~wakaba/who?" rel="author">Wakaba</a>.
Permission is granted to copy, distribute and/or modify this document
under the terms of the <a rel="license"
href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License</a>,
Version 1.2
or any later version published by the <a
href="http://www.fsf.org/">Free Software Foundation</a>;
with no Invariant Sections, no Front‐Cover Texts, and no Back‐Cover
Texts.  A copy of the license is
available at <code class="URI">&lt;<a
    href="http://www.gnu.org/copyleft/fdl.html"
    rel="license">http://www.gnu.org/copyleft/fdl.html</a>&gt;</code>.</p>
</div>

<div id="abstract" class="section">
<h2>Abstract</h2>

<div class="ed issue">...</div>

</div>

<div id="status" class="section">
<h2>Status of This Document</h2>

<p class=section-info><em>This section describes the status of this document
at the time of its publication.  Other documents
might supersede this document.</em></p>

<p>This document is a working draft, produced as part of the 
<a href="http://suika.fam.cx/www/manakai-core/doc/web/">manakai</a> 
project.  It might be updated, replaced, or obsoleted by
other documents at any time.  It is inappropriate to
cite this document as other than <q>work in progress</q>.</p>

<p>Comments on this document are welcome and
may be sent to the <a href="#author">author</a>.</p>

<p>Translations of thie document might be available.
The English version of the document is the only
normative version.</p>
</div>

<div id="introduction" class="section">
<h2>Introduction</h2>

<p class=section-info>This section is <em>non‐normative</em>.</p>

<div class="issue ed">
<p>This is a work-in-progress specification for DOM Document Type
Definition module, as implemented by manakai and 
<a href="http://suika.fam.cx/gate/2005/sw/DOM%20XML%20Document%20Type%20Definition">partially documented in the SuikaWiki</a>.</p>
</div>

<p>The <dfn id=term-dom-dtdef><abbr>DOM</abbr> Document Type Definition</dfn>
module is a set of <abbr>DOM</abbr> interfaces, including both new
interfaces and modifications to existing <abbr>DOM</abbr> interfaces,
over which <abbr>DOM</abbr> applications are able to access to the
definitions of the document type.</p>

<p>Interfaces defined in this specification are partially modeled from
early drafts of <abbr>DOM</abbr> level 1 <span class=ed>@@ ref</span>,
<abbr>DOM</abbr> Abstract Schema level 3 <span class=ed>@@ ref</span>, and
<abbr>XML</abbr> Schema <abbr>API</abbr>, but are not compatible with
any of them as a whole.</p>
</div>

<div class="section" id="terminology">
<h2>Terminology</h2>

<p>The key words <q><em class="rfc2119">MUST</em></q>,
<q><em class="rfc2119">MUST NOT</em></q>,
<q><em class="rfc2119">SHOULD</em></q>,
<q><em class="rfc2119">SHOULD NOT</em></q>, and
<q><em class=rfc2119>MAY</em></q> in this
document are to be interpreted as described in 
<a href="urn:ietf:rfc:2119"><abbr title="Request for Comments">RFC</abbr> 
2119</a>
<cite class="bibref normative">[<a href="#ref-KEYWORDS">KEYWORDS</a>]</cite>.</p>

<!-- Strictly speaking the paragraph below is not part of terminology. -->
<p>All examples and notes in this specification are non‐normative,
as are all sections explicitly marked non‐normative.  Everything
else in this specification is normative.</p>

<p><span class=ed>Algorithm is normative but non-normative</span>.
In addition, the order in which <a href="#errors">errors</a> are
raised is undefined.</p>

<p class=ed><var>A</var> object is an object implementing <var>A</var>
interface.</p>

<p class=ed>@@ ref to DOM Binding Spec</p>

<p>If the <code>strictErrorChecking</code> attribute of the 
<code>Document</code> node is <code>false</code>, the methods are
not required to raise exceptions <span class=ed>[DOM3]</span>.</p>
</div>

<div class=section id=dom-dtdef>
<h2><abbr>DOM</abbr> Document Type Definition Module</h2>

<p>The <abbr>DOM</abbr> Document Type Definition module, version 3.0, 
consists of three interfaces:</p>
<ul>
<li><a href="#DocumentXDoctype"><code>DocumentXDoctype</code></a></li>
<li><a href="#DocumentTypeDefinition"><code>DocumentTypeDefinition</code></a></li>
<li><a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a></li>
<li><a href="#AttributeDefinition"><code>AttributeDefinition</code></a></li>
</ul>

<p>In addition, it modifies interfaces
<a href="#Node"><code>Node</code></a>,
<a href="#DocumentType"><code>DocumentType</code></a>,
<a href="#Entity"><code>Entity</code></a>,
<a href="#EntityReference"><code>EntityReference</code></a>,
<a href="#Notation"><code>Notation</code></a>, and
<a href="#ProcessingInstruction"><code>ProcessingInstruction</code></a>.</p>

<div class=section id=features>
<h3>Feature Name</h3>

<p>In a <abbr>DOM</abbr> implementation that supports the version 3.0 of 
the <abbr>DOM</abbr> Document Type Definition module, the 
<code>hasFeature</code> method of a <code>DOMImplementation</code> object 
<em class=rfc2119>MUST</em> return <code>true</code> when the parameters are
set to <code>http://suika.fam.cx/www/2006/feature/XDoctype</code> and 
<code>3.0</code> respectively.</p>

<p>In such an implementation, the <code>getFeature</code> method of a 
<code>Document</code> object <em class=rfc2119>MUST</em> return the (at least
conceptually) same object implementing the
<a href="#DocumentXDoctype"><code>DocumentXDoctype</code></a> interface when
the parameters are set to 
<code>http://suika.fam.cx/www/2006/feature/XDoctype</code> and 
<code>3.0</code> respectively.  Likewise, any method that takes one or more
feature names with or without version number, including the methods
<code>hasFeature</code> and <code>getFeature</code>, 
<em class=rfc2119>MUST</em> behave in a manner consistent with the 
aforementioned cases.</p>
</div>

<div class=section id=section-node>
<h3>Modifications to the <code id=Node>Node</code> Interface</h3>

<pre class=idl><code>// Additions to the Node interface

// Additions to the NodeType definition group
const unsigned short <a href="#ELEMENT_TYPE_DEFINITION_NODE">ELEMENT_TYPE_DEFINITION_NODE</a> = 81001;
const unsigned short <a href="#ATTRIBUTE_DEFINITION_NODE">ATTRIBUTE_DEFINITION_NODE</a> = 81002;
</pre>

<p>This specification adds two new types (subinterfaces) of 
<a href="#Node"><code>Node</code></a>: element type definition (node type 
<a href="#ELEMENT_TYPE_DEFINITION_NODE"><code>ELEMENT_TYPE_DEFINITION_NODE</code></a>,
interface
<a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a>) and
attribute definition (node type
<a href="#ATTRIBUTE_DEFINITION_NODE"><code>ATTRIBUTE_DEFINITION_NODE</code></a>,
interface
<a href="#AttributeDefinition"><code>AttributeDefinition</code></a>).  For
these kinds of nodes, methods and attributes in the 
<a href="#Node"><code>Node</code></a> interface must behave as following:</p>

<dl>
<dt><code id=nodeType>nodeType</code></dt>
  <dd>
    <p>On getting, the attribute <em class=rfc2119>MUST</em> return
    <a href="#ELEMENT_TYPE_DEFINITION_NODE"><code>ELEMENT_TYPE_DEFINITION_NODE</code></a>
    (if the node is an 
    <a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a>) or
    <a href="#ATTRIBUTE_DEFINITION_NODE"><code>ATTRIBUTE_DEFINITION_NODE</code></a>
    (if the node is an
    <a href="#AttributeDefinition"><code>AttributeDefinition</code></a>).</p>

    <!-- NodeType -->
<p>Two constants are added to the <code id=NodeType>NodeType</code>
definition group of the <a href="#Node"><code>Node</code></a> interface as
following:</p>
<table>
<thead>
<tr><th scope=col>Name<th scope=col>Value<th scope=col>Description</tr>
</thead>
<tbody>
<tr>
<th scope=row><dfn id=ELEMENT_TYPE_DEFINITION_NODE class=dom-const><code>ELEMENT_TYPE_DEFINITION_NODE</code></dfn>
<td><code>81001</code><td>The node is an 
<a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a>.</tr>
<tr>
<th scope=row><dfn id=ATTRIBUTE_DEFINITION_NODE class=dom-const><code>ATTRIBUTE_DEFINITION_NODE</code></dfn>
<td><code>81002</code><td>The node is an 
<a href="#ElementTypeDefinition"><code>AttributeDefinition</code></a>.</tr>
</tbody>
</table>
  </dd>
<dt class=ed>@@ ...</dt>
</dl>

</div>

<div class=section id=section-documentxdoctype>
<h3>The <code>DocumentXDoctype</code> Interface</h3>

<pre class=idl><code>interface <dfn id=DocumentXDoctype><code>DocumentXDoctype</code></dfn> {
  DocumentType <a href="#createDocumentTypeDefinition">createDocumentTypeDefinition</a>
    (in DOMString <a href="#createDocumentTypeDefinition-name"><var>name</var></a>)
    raises (DOMException);
  <a href="#ElementTypeDefinition">ElementTypeDefinition</a> <a href="#createElementTypeDefinition">createElementTypeDefinition</a>
    (in DOMString <a href="#createElementTypeDefinition-name"><var>name</var></a>)
    raises (DOMException);
  <a href="#AttributeDefinition">AttributeDefinition</a> <a href="#createAttributeDefinition">createAttributeDefinition</a>
    (in DOMString <a href="#createAttributeDefinition-name"><var>name</var></a>)
    raises (DOMException);
  <a href="#Entity">Entity</a> <a href="#createGeneralEntity">createGeneralEntityDefinition</a>
    (in DOMString <a href="#createGeneralEntity-name"><var>name</var></a>)
    raises (DOMException);
  <a href="#Notation">Notation</a> <a href="#createNotation">createNotation</a>
    (in DOMString <a href="#createNotation-name"><var>name</var></a>)
    raises (DOMException);
}</code></pre>

<div class=ed>@@ cast definition</div>

<dl>
<dt><dfn id=createDocumentTypeDefinition class=dom-method><code>createDocumentTypeDefinition</code></dfn>,
method</dt>
  <dd>
    <p>This method creates a <code>DocumentType</code> node with the specified
    name, belonging to the document.</p>
    <p>The <dfn id=createDocumentTypeDefinition-name class=dom-param><var>name</var></dfn>
    parameter is the name of the document type.</p>

    <p>When invoked, the method <em class=rfc2119>MUST</em> create and
    return a <code>DocumentType</code> node with the following attributes:</p>
    <dl>
    <dt><code>attributes</code>, <code>parentNode</code></dt>
      <dd><code>null</code>.</dd>
    <dt><code>elementTypes</code>, <code>generalEntities</code>, and
    <code>notations</code></dt>
      <dd>Empty <code>NamedNodeMap</code> objects.</dd>
    <dt><code>entities</code></dt>
      <dd>The same value as the <code>generalEntities</code> attribute.</dd>
    <dt><code>childNodes</code></dt>
      <dd>An empty <code>NodeList</code> object.</dd>
    <dt><code>internalSubset</code>, <code>publicId</code>, and
    <code>systemId</code></dt>
      <dd>Empty strings.</dd>
    <dt><code>manakaiReadOnly</code> <span class=ed>[manakai]</span></dt>
      <dd><code>false</code>.</dd>
    <dt><code>nodeName</code></dt>
      <dd><a href="#createDocumentTypeDefinition-name"><var>name</var></a>.</dd>
    <dt><code>ownerDocument</code></dt>
      <dd>The <code>Document</code> over which the method is invoked.</dd>
    </dl>
    <p>In addition, the method <em class=rfc2119>MUST</em> be marked as 
    containing five general entity declarations: <code>amp</code>,
    <code>lt</code>, <code>gt</code>, <code>quot</code>, and
    <code>apos</code>.</p>
  </dd>
<dt><dfn id=createElementTypeDefinition class=dom-method><code>createElementTypeDefinition</code></dfn>,
method</dt>
  <dd>
    <p>This method creates a <code>ElementTypeDefinition</code> node with the
    specified name, belonging to the document.</p>
    <p>The <dfn id=createElementTypeDefinition-name class=dom-param><var>name</var></dfn>
    parameter is the name of the element type defined by the element
    type definition.</p>

    <p>When invoked, the method <em class=rfc2119>MUST</em> create and 
    return an
    <a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a>
    node with the following attributes:</p>
    <dl>
    <dt><a href="#attributeDefinitions"><code>attributeDefinitions</code></a></dt>
      <dd>An empty <code>NamedNodeMap</code> object.</dd>
    <dt><code>attributes</code>, <code>parentNode</code></dt>
      <dd><code>null</code>.</dd>
    <dt><code>childNodes</code></dt>
      <dd>An empty <code>NodeList</code> object.</dd>
    <dt><code>manakaiReadOnly</code> <span class=ed>[manakai]</span></dt>
      <dd><code>false</code>.</dd>
    <dt><code>nodeName</code></dt>
      <dd><a href="#createElementTypeDefinition-name"><var>name</var></a>.</dd>
    <dt><code>ownerDocument</code></dt>
      <dd>The <code>Document</code> node over which the method is invoked.</dd>
    <dt><a href="#ownerDocumentTypeDefinition"><code>ownerDocumentTypeDefinition</code></a></dt>
      <dd><code>null</code>.</dd>
    <dt class=ed>@@ Ensure all attributes are defined</dt>
    </dl>
  </dd>
<dt><dfn id=createAttributeDefinition class=dom-method><code>createAttributeDefinition</code></dfn>,
method</dt>
  <dd>
    <p>This method creates a <code>AttributeDefinition</code> node with the
    specified name, belonging to the document.</p>
    <p>The <dfn id=createAttributeDefinition-name class=dom-param><var>name</var></dfn>
    parameter is the name of the attribute defined by the attribute
    definition.</p>

    <p>When invoked, the method <em class=rfc2119>MUST</em> create and 
    return an
    <a href="#AttributeDefinition"><code>AttributeDefinition</code></a>
    node with the following attributes:</p>
    <dl>
    <dt><code>allowedTokens</code></dt>
      <dd>An empty <code>DOMStringList</code> object.</dd>
    <dt><code>attributes</code>,
    <a href="#ownerElementTypeDefinition"><code>ownerElementTypeDefinition</code></a>,
    and <code>parentNode</code></dt>
      <dd><code>null</code>.</dd>
    <dt><code>childNodes</code></dt>
      <dd>An empty <code>NodeList</code> object.</dd>
    <dt><code>declaredType</code></dt>
      <dd><a href="#NO_TYPE_ATTR"><code>NO_TYPE_ATTR</code></a>.</dd>
    <dt><code>defaultType</code></dt>
      <dd><a href="#UNKNOWN_DEFAULT"><code>UNKNOWN_DEFAULT</code></a>.</dd>
    <dt><code>manakaiReadOnly</code> <span class=ed>[manakai]</span></dt>
      <dd><code>false</code>.</dd>
    <dt><code>nodeName</code></dt>
      <dd><a href="#createAttributeDefinition-name"><var>name</var></a>.</dd>
    <dt><code>ownerDocument</code></dt>
      <dd>The <code>Document</code> node over which the method is invoked.</dd>
    <dt class=ed>@@ Ensure all attributes are defined</dt>
    </dl>

    <div class=ed>
    <p>@@ Should we keep these statements?: 
However, if the &lt;cfg::cfg|xml-id> configuration
parameter is set to <code>true</code> and the <var>name</var>
is <code>xml:id</code>, then the [CODE(DOMa)@en[[[declaredType]]]]
attribute is set to <code>ID_ATTR</code>.
[CODE(DOMa)@en[[[defaultType]]]]?</p>
    </div>
  </dd>
<dt><dfn id=createGeneralEntity class=dom-method><code>createGeneralEntity</code></dfn>,
method</dt>
  <dd>
    <p>This method creates a <a href="#Entity"><code>Entity</code></a> node
    with the specified name, which represents a general entity, belonging to
    the document.</p>
    <p>The <dfn id=createGeneralEntity-name class=dom-param><var>name</var></dfn>
    parameter is the name of the general entity.</p>

    <p>When invoked, the method <em class=rfc2119>MUST</em> create and return
    an <a href="#Entity"><code>Entity</code></a> node with the following
    attributes:</p>
    <dl>
    <dt><code>attributes</code>, <code>notationName</code>,
    <a href="#ownerDocumentTypeDefinition"><code>ownerDocumentTypeDefinition</code></a>,
    and <code>parentNode</code></dt>
      <dd><code>null</code>.</dd>
    <dt><code>childNodes</code></dt>
      <dd>An empty <code>NodeList</code> object.</dd>
    <dt><code>manakaiDeclarationBaseURI</code>,
    <code>manakaiEntityBaseURI</code>, and
    <code>manakaiEntityURI</code> <span class=ed>@@ ref</span></dt>
      <dd>No explicit value is set.</dd>
    <dt><code>manakaiHasReplacementTree</code> and
    <code>manakaiReadOnly</code> <span class=ed>[manakai]</span></dt>
      <dd><code>false</code>.</dd>
    <dt><code>nodeName</code></dt>
      <dd><a href="#createGeneralEntity-name"><var>name</var></a>.</dd>
      <dd>
        <div class="note memo">
          <p>It is not an error for
          <a href="#createGeneralEntity-name"><var>name</var></a> matching
          to the name of one of predefined general parsed entities in
          <abbr>XML</abbr> or <abbr>HTML</abbr>.  For example, 
          <a href="#createGeneralEntity-name"><var>name</var></a> might be
          <code>amp</code>, resulting in an
          <a href="#Entity"><code>Entity</code></a> node
          with its <code>nodeName</code> attribute set to <code>amp</code>.</p>
        </div>
      </dd>
    <dt><code>ownerDocument</code></dt>
      <dd>The <code>Document</code> node over which the method is invoked.</dd>
    <dt><code>publicId</code>, and <code>systemId</code></dt>
      <dd><code>null</code>.</dd>
      <dd class=ed>@@ publicId and systemId should be empty string?</dd>
    <dt class=ed>@@ Ensure all attributes are defined</dd>
    </dl>
  </dd>
<dt><dfn id=createNotation class=dom-method><code>createNotation</code></dfn>,
method</dt>
  <dd>
    <p>This method creates a <code>Notation</code> node with the
    specified name, belonging to the document.</p>
    <p>The <dfn id=createNotation-name class=dom-param><var>name</var></dfn>
    parameter is the name of the notation.</p>

    <p>When invoked, the method <em class=rfc2119>MUST</em> create and return
    a <code>Notation</code> node with the following attributes:</p>
    <dl>
    <dt><code>attributes</code>,
    <a href="#ownerDocumentTypeDefinition"><code>ownerDocumentTypeDefinition</code></a>,
    and <code>parentNode</code></dt>
      <dd><code>null</code>.</dd>
    <dt><code>childNodes</code></dt>
      <dd>An empty <code>NodeList</code> object.</dd>
    <dt><code>manakaiDeclarationBaseURI</code></dt>
      <dd>No explicit value is set.</dd>
    <dt><code>manakaiReadOnly</code> <span class=ed>[manakai]</span></dt>
      <dd><code>false</code>.</dd>
    <dt><code>nodeName</code></dt>
      <dd><a href="#createNotation-name"><var>name</var></a>.</dd>
    <dt><code>ownerDocument</code></dt>
      <dd>The <code>Document</code> node over which the method is invoked.</dd>
    <dt><code>publicId</code> and <code>systemId</code></dt>
      <dd><code>null</code>.</dd>
      <dd class=ed>@@ publicId and systemId should be empty string?</dd>
    <dt class=ed>@@ Ensure all attributes are defined</dt>
    </dl>
  </dd>
</dl>

<p>These methods <em class=rfc2119>MUST</em> raise an
<code>INVALID_CHARACTER_ERR</code> exception <span class=ed>@@ ref</span>
if <var>name</var> is <em>not</em> a legal <code>Name</code> according to
the <abbr>XML</abbr> version in use, as specified in the 
<code>xmlVersion</code> attribute of the <code>Document</code> node.</p>

<div class="note memo">
<p>Non‐<abbr>XML</abbr> case is intentionally left unspecified for now,
since <abbr>DOM3</abbr> specification <span class=ed>@@ ref</span> does not
define it for <code>Document</code> methods.</p>

<p><var>name</var> does not have to be a namespace qualified name.</p>
</div>

</div>

<div class=section id=section-documenttypedefinition>
<h3>The <code>DocumentTypeDefinition</code> Interface</h3>

<pre class=idl><code>interface <dfn id=DocumentTypeDefinition><code>DocumentTypeDefinition</code></dfn> {
  readonly attribute NamedNodeMap <a href="#elementTypes">elementTypes</a>;
  readonly attribute NamedNodeMap <a href="#generalEntities">generalEntities</a>;
  readonly attribute NamedNodeMap <a href="#notations">notations</a>;

  <a href="#ElementTypeDefinition">ElementTypeDefinition</a> <a href="#getElementTypeDefinitionNode">getElementTypeDefinitionNode</a>
    (in DOMString <a href="#getElementTypeDefinitionNode-name"><var>name</var></a>);
  <a href="#Entity">Entity</a> <a href="#getGeneralEntityNode">getGeneralEntityNode</a>
    (in DOMString <a href="#getGeneralEntityNode-name"><var>name</var></a>);
  <a href="#Notation">Notation</a> <a href="#getNotationNode">getNotationNode</a>
    (in DOMString <a href="#getNotationNode-name"><var>name</var></a>);

  void <a href="#setElementTypeDefinitionNode">setElementTypeDefinitionNode</a>
    (in DOMString <a href="#setElementTypeDefinitionNode-node"><var>node</var></a>)
    raises (DOMException);
  void <a href="#setGeneralEntityNode">setGeneralEntityNode</a>
    (in DOMString <a href="#setGeneralEntityNode-node"><var>node</var></a>)
    raises (DOMException);
  void <a href="#setNotationNode">setNotationNode</a>
    (in DOMString <a href="#setNotationNode-node"><var>node</var></a>)
    raises (DOMException);
}</code></pre>

<pre class=ed>
[1] In an implementation that supports the 
[CODE(URI)@en[[[http://suika.fam.cx/www/2006/feature/XDoctype]]]]
feature, a [CODE(DOMi)@en[[[DocumentType]]]] node
must implement the [CODE(DOMi)@en[[[DocumentTypeDefinition]]]]
interface.  See [[DOM XML Document Type Definition]>>3] for
details.
</pre>

<dl>
<dt><dfn id=elementTypes class=dom-attr><code>elementTypes</code></dfn> of
type <code>NamedNodeMap</code>, read‐only</dt>
  <dd><p>A live <code>NamedNodeMap</code> object that contains all the element
  type definitions belonging to the <code>DocumentType</code> node.</p>

  <p>On getting, the attribute <em class=rfc2119>MUST</em> return the
  <code>NamedNodeMap</code> object that contains all the 
  <a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a>
  nodes belonging to the <code>DocumentType</code> node.  The
  <code>NamedNodeMap</code> object <em class=rfc2119>MUST</em> be read‐only
  if and only if the node is read‐only.  The <code>NamedNodeMap</code>
  object <em class=rfc2119>MUST</em> be live and the same object
  <em class=rfc2119>MUST</em> be returned for any invocation.</p>

  <p>If the <code>DocumentType</code> node is created during the process
  to create a <abbr>DOM</abbr> from an <abbr>XML</abbr> document, the following
  requirements are applied:  The <code>NamedNodeMap</code> object in the
  <a href="#elementTypes"><code>elementType</code></a> attribute 
  <em class=rfc2119>MUST</em> be so transformed that the object contains
  the <code>ElementTypeDefinition</code> nodes for the element types
  whose name is presented as the <code>Name</code> of the element type or
  attribute definition list declarations processed by the <abbr>XML</abbr>
  processor.  If there is more than one element type declarations for an
  element type, then the declarations other than the first one 
  <em class=rfc2119>MUST</em> be ignored for the purpose of constructing the
  <code>NamedNodeMap</code> object.</p></dd>
<dt><dfn id=generalEntities class=dom-attr><code>generalEntities</code></dfn>
of type <code>NamedNodeMap</code>, read‐only</dt>
  <dd><p>A live <code>NamedNodeMap</code> object that contains all the general
  entities belonging to the <code>DocumentType</code> node.</p>
  
  <p>On getting, the attribute <em class=rfc2119>MUST</em> return the 
  same value as the <code>entities</code> attribute (defined in the
  <code>DocumentType</code> interface) of the same node.</p>

  <div class="note memo">
    <p>This attribute is part of the interface for historical reason.</p>
  </div></dd>
<!--
All entities declared in the document type definition
contained in or referenced from the document entity
might not be exposed through this collection, depending
on the information provided by the XML processor for
the DOM implementation.  In particular, it might not
contain any entity if entity references are expanded
at the parse time.  An implementation [['''MUST NOT''']]
expose an [CODE(DOMi)@en[[[Entity]]]] node whose [CODE(DOMa)@en[[[nodeName]]]]
is equal to the name of one of five predefined general entities in
XML through the collection as the result of parsing of an XML
document that has no error.  Duplicate entity declarations are also discarded.

The attribute [['''MUST''']] return the [CODE(DOMi)@en[[[NamedNodeMap]]]]
object that contains all the [CODE(DOMi)@en[[[Entity]]]] nodes
representing general entities belong to the node.  The returned 
[CODE(DOMi)@en[[[NamedNodeMap]]]] object [['''MUST''']] be read-only if and only if 
the node is read-only. Note that the [CODE(DOMi)@en[[[NamedNodeMap]]]] object is live
and therefore any change of read-only flag on the node is immediately
reflected by that of the object.
-->
<dt><dfn id=notations class=dom-attr><code>notations</code></dfn> of type
<code>notations</code>, read‐only</code>
  <dd><p>A live <code>NamedNodeMap</code> object that contains all the 
  notations belonging to the <code>DocumentType</code> node.</p>
  
  <p>On getting, the attribute <em class=rfc2119>MUST</em> return the 
  same value as the <code>notations</code> attribute (defined in the
  <code>DocumentType</code> interface) of the same node.</p>

  <div class="note memo">
    <p>This attribute is part of the interface for historical reason.</p>
    <p>Implementations are not required to implement the 
    <code>notations</code> attribute twice (for <code>DocumentType</code>
    and <code>DocumentTypeDefinition</code> interfaces); they share exactly
    same definition.</p>
  </div></dd>
<!--
If the [CODE(DOMi)@en[[[DocumentTypeDefinition]]]] node is
created from an XML document, duplicate notation declarations, if any, in DTD 
[['''MUST NOT''']] result in a node in the [CODE(DOMi)@en[[[NamedNodeMap]]]]
object and only the first declaration [['''MUST''']] be
made available as a [CODE(DOMi)@en[[[Notation]]]] node.

;; This definition is based on one for the 
[CODE(DOMa)@en[[[notations]]]] attribute of the
[CODE(DOMi)@en[[[DocumentType]]]] interface in DOM XML module.
Since duplication is violation to the Validity Constraint,
XML parsers might vary on how notations are notified to
the application.  In particular, [CODE(InfoProp)@en[[[notations]]]]
property of the document information item in XML Information Set
is so defined that in case ''any'' notation is declared for 
multiple times then the property has no value.

The attribute [['''MUST''']] return the [CODE(DOMi)@en[[[NamedNodeMap]]]]
object that contains all the [CODE(DOMi)@en[[[Notation]]]] nodes
representing notations belong to the node.  The returned 
[CODE(DOMi)@en[[[NamedNodeMap]]]] object [['''MUST''']] be read-only if and only if 
the node is read-only. Note that the [CODE(DOMi)@en[[[NamedNodeMap]]]] object is live
and therefore any change of read-only flag on the node is immediately
reflected by that of the object.
-->

<dt class=ed>@@ other members...
</dl>

<div class=ed>
<p>A future version of this interface might define the
<code>parameterEntities</code> and getter/setter for parameter entities.
</div>

</div>

<div class=section id=section-elementtypedefinition>
<h3>The <code>ElementTypeDefinition</code> Interface</h3>

<pre class=idl><code>interface <dfn id=ElementTypeDefinition><code>ElementTypeDefinition</code></dfn> : <a href="#Node">Node</a> {
  readonly attribute <a href="#ownerDocumentTypeDefinition">ownerDocumentTypeDefinition</a>;

  <span class=ed>@@ more</span>
}</code></pre>

<pre class=ed>** Modifications to [CODE(DOMi)@en[[[Node]]]] members

[3] The getter of the [CODE(DOMa)@en[[[attributes]]]] attribute
of an [CODE(DOMi)@en[[[ElementTypeDefinition]]]] object
[['''MUST''']] return [CODE(IDL)@en[[[null]]]].

[4] The getter of the [CODE(DOMa)@en[[[baseURI]]]] attribute
of an [CODE(DOMi)@en[[[ElementTypeDefinition]]]] object
[['''MUST''']] return the [CODE(DOMa)@en[[[baseURI]]]]
of the [CDOE(DOMa)@en[[[ownerDocument]]]] of the
[CODE(DOMi)@en[[[ElementTypeDefinition]]]] object.
Note that it might be [CODE(IDL)@en[[[null]]]].

[1] The getter of the [CODE(DOMa)@en[[[nodeName]]]] attribute
of an [CODE(DOMi)@en[[[ElementTypeDefinition]]]] object
[['''MUST''']] return the name of the element type.

[2] The getters of the [CODE(DOMa)@en[[[nodeValue]]]] 
and [CODE(DOMa)@en[[[textContent]]]] attributes
of an [CODE(DOMi)@en[[[ElementTypeDefinition]]]]
object [['''MUST''']] return [CODE(IDL)@en[[[null]]]].

;; Thus, the setter of these attributes do nothing.

The setter of the [CODE(DOMa)@en[[[textContent]]]]
attribute of an [CODE(DOMi)@en[[[ElementTypeDefinition]]]]
object [['''MUST NOT''']] throw a 
[CODE(DOMc)@en[[[NO_MODIFICATION_ALLOWED_ERR]]]].

** The [CODE(DOMi)@en[ElementTypeDefinition]] Interface

[5] The 
[DFN@en[[CODE(DOMa)@en[[[ownerDocumentTypeDefinition]]]] attribute]]
of the [CODE(DOMi)@en[[[ElementTypeDefinition]]]]
interface is defined in [[manakai//DOM Extensions]>>50].</pre>
</div>

<div class=section id=section-attributedefinition>
<h3>The <code>AttributeDefinition</code> Interface</h3>

<pre class=idl><code>interface <dfn id=AttributeDefinition><code>AttributeDefinition</code></dfn> : <a href="#Node">Node</a> {
  <span class=comment>// <a href="#DeclaredValueType">DeclaredValueType</a></span>
  const unsigned short <a href="#NO_TYPE_ATTR">NO_TYPE_ATTR</a> = 0;
  const unsigned short <a href="#CDATA_ATTR">CDATA_ATTR</a> = 1;
  const unsigned short <a href="#ID_ATTR">ID_ATTR</a> = 2;
  const unsigned short <a href="#IDREF_ATTR">IDREF_ATTR</a> = 3;
  const unsigned short <a href="#IDREFS_ATTR">IDREFS_ATTR</a> = 4;
  const unsigned short <a href="#ENTITY_ATTR">ENTITY_ATTR</a> = 5;
  const unsigned short <a href="#ENTITIES_ATTR">ENTITIES_ATTR</a> = 6;
  const unsigned short <a href="#NMTOKEN_ATTR">NMTOKEN_ATTR</a> = 7;
  const unsigned short <a href="#NMTOKENS_ATTR">NMTOKENS_ATTR</a> = 8;
  const unsigned short <a href="#NOTATION_ATTR">NOTATION_ATTR</a> = 9;
  const unsigned short <a href="#ENUMERATION_ATTR">ENUMERATION_ATTR</a> = 10;
  const unsigned short <a href="#UNKNOWN_ATTR">UNKNOWN_ATTR</a> = 11;
  
  readonly attribute <a href="#ElementTypeDefinition">ElementTypeDefinition</a> <a href="#ownerElementTypeDefinition">ownerElementTypeDefinition</a>;

  readonly attribute unsigned short <a href="#declaredType">declaredType</a>;
  readonly attribute unsigned short <a href="#defaultType">defaultType</a>;

  <span class=ed>...</span>
}</code></pre>

<pre class=ed>** Modifications to [CODE(DOMi)@en[[[Node]]]] members

[3] The getter of the [CODE(DOMa)@en[[[attributes]]]] attribute
of an [CODE(DOMi)@en[[[AttributeDefinition]]]] object
[['''MUST''']] return [CODE(IDL)@en[[[null]]]].

[9] The getter of the [CODE(DOMa)@en[[[baseURI]]]] attribute
of an [CODE(DOMi)@en[[[AttributeDefinition]]]] object
[['''MUST''']] return the [CODE(DOMa)@en[[[baseURI]]]]
of the [CDOE(DOMa)@en[[[ownerDocument]]]] of the
[CODE(DOMi)@en[[[AttributeDefinition]]]] object.
Note that it might be [CODE(IDL)@en[[[null]]]].

[1] The getter of the [CODE(DOMa)@en[[[nodeName]]]] attribute
of an [CODE(DOMi)@en[[[AttributeDefinition]]]] object
[['''MUST''']] return the name of the attribute.

[2] The getter of the [CODE(DOMa)@en[[[nodeValue]]]] attribute
of an [CODE(DOMi)@en[[[AttributeDefinition]]]] object
[['''MUST''']] return the normalized default value
of the attribute.

@@

[4] The getter of the [CODE(DOMa)@en[[[textContent]]]]
attribute of an [CODE(DOMi)@en[[[AttributeDefinition]]]] 
object [['''MUST''']] behave as if it were an
[CODE(DOMi)@en[[[Attr]]]] object.

The setter of the [CODE(DOMa)@en[[[textContent]]]] attribute
of an [CODE(DOMi)@en[[[AttributeDefinition]]]] object
[['''MUST''']] behave as if the following algorithm
is performed:
= If the [CODE(DOMi)@en[[[AttributeDefinition]]]]
object is read-only, then throw an
[CODE(DOMc)@en[[[NO_MODIFICATION_ALLOWED_ERR]]]].
= Remove any child node the node has.
= If the new value is not empty and not [CODE(IDL)@en[[[null]]]],
then create a [CODE(DOMi)@en[[[Text]]]] node
whose [CODE(DOMa)@en[[[data]]]] is the new value
and append it to the [CODE(DOMi)@en[[[AttributeDefinition]]]].
</pre>

<dl>
<dt><dfn id=ownerElementTypeDefinition class=dom-attr><code>ownerElementTypeDefinition</code></dfn>
of type
<a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a>, 
read‐only</dt>
  <dd><p>The
  <a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a> to
  which the <a href="#AttributeDefinition"><code>AttributeDefinition</code></a>
  node belongs.</p>

  <p>On getting, the attribute <em class=rfc2119>MUST</em> return an
  <a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a> node.
  It <em class=rfc2119>MUST</em> be such a node that whose
  <a href="#attributeDefinitons"><code>attributeDefinitions</code></a>
  attribute contains the <code>NamedNodeMap</code> object that contains
  the <a href="#AttributeDefinition"><code>AttributeDefinition</code></a>
  node.  If there is no such an 
  <a href="#ElementTypeDefinition"><code>ElementTypeDefinition</code></a> node,
  then <code>null</code> <em class=rfc2119>MUST</em> be returned.</p>
<dt><dfn id=declaredType class=dom-attr><code>declaredType</code></dfn> of type
<code>unsigned short</code></dt>
  <dd><p>The declared type <span class=ed>@@ ref</span> of the attribute.
  It is expected that this attribute contains a value from the definition group
  <a href="#DeclaredValueType"><code>DeclaredValueType</code></a>.</p>

  <p>On getting, the attribute <em class=rfc2119>MUST</em> return the
  value associated to this attribute.</p>

  <p>On setting, the attribute <em class=rfc2119>MUST</em> raise a
  <code>NO_MODIFICATION_ALLOWED_ERR</code> <span class=ed>@@ ref</span>
  exception if the
  <a href="#AttributeDefinition"><code>AttributeDefinition</code></a> node
  is read‐only <span class=ed>@@ ref</span>.  Otherwise, it
  <em class=rfc2119>MUST</em> set the specified value as the value
  associated to this attribute.</p>

  <p>If the <code>AttributeDefinition</code> node is created during the process
  to create a <abbr>DOM</abbr> from an <abbr>XML</abbr> document, an
  appropriate value from the
  <a href="#DeclaredValueType"><code>DeclaredValueType</code></a> constant
  group <em class=rfc2119>MUST</em> be set to the attribute.</p>

  <!-- DeclaredValueType -->
<p>The definition group 
<dfn id=DeclaredValueType><code>DeclaredValueType</code></dfn> contains
integers indicating the declared type of attributes.  The definition
group contains the following constants:</p>

<table>
<thead>
<tr><th scope=col>Name<th scope=col>Value<th scope=col>Description</tr>
</thead>
<tbody>
<tr>
<th scope=row><dfn id=NO_TYPE_ATTR class=dom-const><code>NO_TYPE_ATTR</code>
<td><code>0</code><td>No value <span class=ed>[INFOSET]</span>.</tr>
<tr>
<th scope=row><dfn id=CDATA_ATTR class=dom-const><code>CDATA_ATTR</code>
<td><code>1</code><td><code>CDATA</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=ID_ATTR class=dom-const><code>ID_ATTR</code>
<td><code>2</code><td><code>ID</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=IDREF_ATTR class=dom-const><code>IDREF_ATTR</code>
<td><code>3</code><td><code>IDREF</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=IDREFS_ATTR class=dom-const><code>IDREFS_ATTR</code>
<td><code>4</code><td><code>IDREFS</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=ENTITY_ATTR class=dom-const><code>ENTITY_ATTR</code>
<td><code>5</code><td><code>ENTITY</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=ENTITIES_ATTR class=dom-const><code>ENTITIES_ATTR</code>
<td><code>6</code><td><code>ENTITIES</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=NMTOKEN_ATTR class=dom-const><code>NMTOKEN_ATTR</code>
<td><code>7</code><td><code>NMTOKEN</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=NMTOKENS_ATTR class=dom-const><code>NMTOKENS_ATTR</code>
<td><code>8</code><td><code>NMTOKENS</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=NOTATION_ATTR class=dom-const><code>NOTATION_ATTR</code>
<td><code>9</code><td><code>NOTATION</code> <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=ENUMERATION_ATTR class=dom-const><code>ENUMERATION_ATTR</code>
<td><code>10</code><td>Enumeration <span class=ed>[XML]</span>.</tr>
<tr>
<th scope=row><dfn id=UNKNOWN_ATTR class=dom-const><code>UNKNOWN_ATTR</code>
<td><code>11</code><td>Unknown, because no declaration for the attribute
has been read but the [all declaration processed] property
<span class=ed>[INFOSET]</span> would be false.</tr>
</tbody>
</table>

<p>If no attribute type information is available, or if the source
of the information does not distinguish <q>no value</q> and <q>unknown</q>
<span class=ed>[INFOSET]</span>, then the value
<a href="#NO_TYPE_ATTR"><code>NO_TYPE_ATTR</code></a> 
<em class=rfc2119>MUST</em> be used.</p>

<div class="note memo">
<p>An <a href="#AttributeDefinition"><code>AttributeDefinition</code></a> node
created by the 
<a href="#createAttributeDefinition"><code>createAttributeDefinition</code></a>
method has its <a href="#declaredType"><code>declaredType</code></a> attribute
set to <a href="#NO_TYPE_ATTR"><code>NO_TYPE_ATTR</code></a>.</p>
</div>

<p>If the source of the information does not distinguish <q>no value</q>
and/or <q>unknown</q> <span class=ed>[INFOSET]</span> and
<code>CDATA</code> <span class=ed>[XML]</span>, then the value
<a href="#CDATA_ATTR"><code>CDATA_ATTR</code></a> <em class=rfc2119>MUST</em>
be used.</p>

<p>In Perl binding <span class=ed>[PERLBINDING]</span>, the
<code>Attr</code> nodes <em class=rfc2119>MUST</em> implement the
<a href="#DeclaredValueType"><code>DeclaredValueType</code></a>
definition group.</p>

  </dd>
<dt><dfn id=defaultType class=dom-attr><code>defaultType</code></dfn> of
type <code>unsigned short</code></dt>
  <dd><p>The type of the default for the attribute.  It is expected that this 
  attribute contains a value from the definition group
  <a href="#DefaultValueType"><code>DefaultValueType</code></a>.</p>

  <p>On getting, the attribute <em class=rfc2119>MUST</em> return
  the value associated to this attribute.</p>

  <p>On setting, the attribute <em class=rfc2119>MUST</em> raise a
  <code>NO_MODIFICATION_ALLOWED_ERR</code> <span class=ed>@@ ref</span>
  exception if the
  <a href="#AttributeDefinition"><code>AttributeDefinition</code></a> node
  is read‐only <span class=ed>@@ ref</span>.  Otherwise, it
  <em class=rfc2119>MUST</em> set the specified value as the value
  associated to this attribute.</p>

  <p>If the 
  <a href="#AttributeDefinition"><code>AttributeDefinition</code></a> node is
  created during the process to create a <abbr>DOM</abbr> from an
  <abbr>XML</abbr> document, an appropriate value from the
  <a href="#DefaultValueType"><code>DefaultValueType</code></a> definition
  group <em class=rfc2119>MUST</em> be set to the attribute.</p>

  <!-- DefaultValueType -->
  <p>The definition group
  <dfn id=DefaultValueType><code>DefaultValueType</code></dfn>
  contains integers indicating the type of the default for the attribute.
  The definition group contains the following constans:</p>

  <table>
  <thead>
  <tr><th scope=col>Name<th scope=col>Value<th scope=col>Description</tr>
  </thead>
  <tbody>
  <tr>
  <th scope=row><dfn id=UNKNOWN_DEFAULT class=dom-const><code>UNKNOWN_DEFAULT</code></dfn>
  <td><code>0</code><td>Unknown.</tr>
  <tr>
  <th scope=row><dfn id=FIXED_DEFAULT class=dom-const><code>FIXED_DEFAULT</code></dfn>
  <td><code>1</code><td>Provided explicitly and fixed
  <span class=ed>@@ ref</span> to that value.</tr>
  <tr>
  <th scope=row><dfn id=REQUIRED_DEFAULT class=dom-const><code>REQUIRED_DEFAULT</code></dfn>
  <td><code>2</code><td>No default value and the attribute have to be
  explicitly specified.</tr>
  <tr>
  <th scope=row><dfn id=IMPLIED_DEFAULT class=dom-const><code>IMPLIED_DEFAULT</code></dfn>
  <td><code>3</code><td>Implied <span class=ed>@@ ref</span>.</tr>
  <tr>
  <th scope=row><dfn id=EXPLICIT_DEFAULT class=dom-const><code>EXPLICIT_DEFAULT</code></dfn>
  <td><code>4</code><td>Provided explicitly.</tr>
  </tbody>
  </table>

  <p>If the source of the default type does not distinguish
  implied and unknown default types, then the value
  <a href="#IMPLIED_DEFAULT"><code>IMPLIED_DEFAULT</code></a>
  <em class=rfc2119>MUST</em> be used.</p>

  <div class="note memo">
  <p>An <a href="#AttributeDefinition"><code>AttributeDefinition</code></a>
  node created by the
  <a href="#createAttributeDefinition"><code>createAttributeDefinition</code></a>
  method has its <a href="#defaultType"><code>defaultType</code></a>
  attribute set to
  <a href="#UNKNOWN_DEFAULT"><code>UNKNOWN_DEFAULT</code></a>.</p>
  </div></dd>
</dl>

</div>

<div class=section id=section-documenttype>
<h3>Modifications to the <code id=DocumentType>DocumentType</code> 
Interface</h3>

<p>A <a href="#DocumentType"><code>DocumentType</code></a> interface 
<em class=rfc2119>MAY</em> contain zero or more
<a href="#ProcessingInstruction"><code>ProcessingInstruction</code></a>
nodes in the <code>NodeList</code> object contained in the 
<code>childNodes</code> attribute of the 
<a href="#DocumentType"><code>DocumentType</code></a> node.</p>

<p>If the <a href="#DocumentType"><code>DocumentType</code></a> node is created
during the process to create a <abbr>DOM</abbr> from an <abbr>XML</abbr>
document, the <code>NodeList</code> object in the <code>childNodes</code> 
object <em class=rfc2119>MUST</em> contains the 
<a href="#ProcessingInstruction"><code>ProcessingInstruction</code></a>
nodes representing the processing instructions in the document type
definition of the document processed <span class=ed>@@ ref</span> by
the <abbr>XML</abbr> processor.  If the
<a href="#DocumentType"><code>DocumentType</code></a> node is marked
as read‐only, then all the child nodes <em class=rfc2119>MUST</em>
also be marked as read‐only.</p>

<p>If a <a href="#DocumentType"><code>DocumentType</code></a> node is created
from a document type declaration information item <span class=ed>@@ ref</span>,
the <code>NodeList</code> object in the <code>childNodes</code> attribute
of the node <em class=rfc2119>MUST</em> contain the
<a href="#ProcessingInstruction"><code>ProcessingInstruction</code></a> nodes
created from the processing instruction information items in the list in the
[children] property of the document type declaration item in the same 
order.</p>

<p>If a <a href="#DocumentType"><code>DocumentType</code></a> node is mapped to
a document type declaration information item, the list in the [children] 
property <em class=rfc2119>MUST</em> contain the processng instruction
information items created from the 
<a href="#ProcessingInstruction"><code>ProcessingInstruction</code></a> nodes
in the <code>NodeList</code> object in the <code>childNodes</code> attribute
of the <a href="#DocumentType"><code>DocumentType</code></a> node.</p>

<pre class=idl><code>// Modifications to the DocumentType interface
  attribute DOMString <a href="#publicId">publicId</a>;
  attribute DOMString <a href="#systemId">systemId</a>;

  attribute DOMString <a href="#internalSubset">internalSubset</a>;
</code></pre>

<p>The <code id=publicId>publicId</code> attribute and the 
<code id=systemId>systemId</code> attribute of
<a href="#DocumentType"><code>DocumentType</code></a>,
<a href="#Entity"><code>Entity</code></a>, and
<a href="#Notation"><code>Notation</code></a> interfaces are no longer
read‐only.</p>

<p>On setting, the attribute <em class=rfc2119>MUST</em> raise a
<code>NO_MODIFICATION_ALLOWED_ERR</code> <span class=ed>@@ ref</span>
exception if the node is read‐only <span class=ed>@@ ref</span>.  
Otherwise, it <em class=rfc2119>MUST</em> set the specified value as the value
associated to the attribute.  No normalization, relative reference resolution,
or lexical validation is performed. <span class=ed>@@ If the new
value is <code>null</code>, ...</span></p>

<div class="note memo">
<p>Setting an invalid identifier might make the node unserializable.
Setting a public identifier while leaveing system identifier unspecified 
would also make the <a href="#DocumentType"><code>DocumentType</code></a>
or <a href="#Entity"><code>Entity</code></a> node unserializable.</p>
</div>

<div class=ed>
<p>ISSUE: In HTML5, Firefox 1.5, and Opera 9, not specifying public or system identifier results in empty strings.</p>
</div>

<p>The <code id=internalSubset>internalSubset</code> attribute of the
<a href="#DocumentType"><code>DocumentType</code></a> interface is no longer
read‐only.</p>

<p>On setting, the attribute <em class=rfc2119>MUST</em> raise a
<code>NO_MODIFICATION_ALLOWED_ERR</code> <span class=ed>@@ ref</span>
exception if the node is read‐only <span class=ed>@@ ref</span>.  
Otherwise, it <em class=rfc2119>MUST</em> set the specified value as the value
associated to the attribute.  No normalization, or lexical validation is
performed. <span class=ed>@@ If the new value is <code>null</code>, 
...</span></p>

</div>

</div>





<div id="references" class="section reference">
<h2>References</h2>

<div id="normative-references" class="section normative reference">
<h3>Normative References</h3>

<dl>
<dt id=ref-DOM3CORE>DOM3CORE</dt>
  <dd class=ed>@@ W3C DOM Level 3 Core</dd>
<dt id=ref-DOMDTDEF>DOMDTDEF</dt>
  <dd class=ed>@@ manakai's extension to DOM for document type definitions</dd>
<dt id="ref-KEYWORDS">KEYWORDS</dt>
  <dd><cite><a href="urn:ietf:rfc:2119">Key words for use in 
  <abbr>RFCs</abbr> to Indicate Requirement Levels</a></cite>,
  <abbr title="Internet Engineering Task Force">IETF</abbr> 
  <a href="urn:ietf:bcp:14"><abbr title="Best Current Practice">BCP</abbr> 
  14</a>, <abbr title="Request for Comments">RFC</abbr> 2119, 
  <time datetime=1997-03>March 1997</time>.
  <em>This</em> version of the specification is referenced.</dd>
<dt id=ref-INFOSET>INFOSET</dt>
  <dd class=ed>@@</dd>
<dt id=ref-XML10">XML10</dt>
  <dd><cite><a href="http://www.w3.org/TR/2006/REC-xml-20060816">Extensible
  Markup Language (<abbr>XML</abbr>) 1.0 (Fourth Edition)</a></cite>,
  <abbr>W3C</abbr> Recommendation, <time datetime=2006-08-16>16 August 
  2006</time>, edited in place <time datetime=2006-09-29>29 September
  2006</time>.  Tje latest version of the specification is available at
  <code class=uri>&lt;<a href="http://www.w3.org/TR/xml">http://www.w3.org/TR/xml</a>&gt;</code>.
  <em>This</em> version of the specification is referenced.</dd>
<dt id=ref-XML11>XML11</dt>
  <dd class=ed>@@</dd>
</dl>
</div>

<div id="informative-references" class="section informative reference">
<h3>Non‐normative References</h3>

<dl class=ed>
<dt id=ref-CSS>CSS</dt>
  <dd><cite><a href="http://www.w3.org/TR/2007/CR-CSS21-20070719">Cascading
  Style Sheets Level 2 Revision 1 (<abbr>CSS</abbr> 2.1)
  Specification</a></cite>, 
  <abbr title="World Wide Web Consortium">W3C</abbr> Candidate
  Recommendation, <time datetime=2007-07-19>19 July 2007</time>.
  Work in progress.  The latest version of the specification is
  available at 
  <code class=URI>&lt;<a href="http://www.w3.org/TR/CSS21">http://www.w3.org/TR/CSS21</a>></code>.</dd>
<dt id=ref-CSSOM>CSSOM</dt>
  <dd><cite><a href="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?rev=1.55&amp;content-type=text/html;%20charset=utf-8">Cascading
  Style Sheets Object Model (<abbr>CSSOM</abbr>)</a></cite>,
  <abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft,
  <time datetime=2007-06-18>18 June 2007</time>.  Work in progress.
  The latest Editor's Draft of the specification is available at
  <code class=URI>&lt;<a href="http://dev.w3.org/csswg/cssom/Overview.html">http://dev.w3.org/csswg/cssom/Overview.html</a>></code>.</dd>
<dt id=ref-HTML5>HTML5</dt>
  <dd><cite><a href="http://whatwg.org/html5"><abbr>HTML</abbr> 5</a></cite>,
  <abbr title="Web Hypertext Application Technology Working Group">WHATWG</abbr>
  Working Draft.  Work in progress.</dd>
<dt id=ref-SAPI>SAPI</dt>
  <dd><cite><a href="http://dev.w3.org/cvsweb/~checkout~/2006/webapi/selectors-api/Overview.html?rev=1.28&amp;content-type=text/html;%20charset=utf-8">Selectors <abbr>API</abbr></a></cite>,
  <abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft,
  <time datetime=2007-08-29>29 August 2007</time>.  Work in progress.
  The latest Editor's Draft of the specification is available at
  <code class=URI>&lt;<a href="http://dev.w3.org/2006/webapi/selectors-api/Overview.html">http://dev.w3.org/2006/webapi/selectors-api/Overview.html</a>></code>.
  The latest published version of the specification is available at
  <code class=URI>&lt;<a href="http://www.w3.org/TR/selectors-api/">http://www.w3.org/TR/selectors-api/</a>></code>.</dd>
<dt id=XBL2>XBL2</dt>
  <dd><cite><a href="http://www.mozilla.org/projects/xbl/xbl2.html"><abbr>XBL</abbr>
  2.0</a></cite>, Mozilla.org, <time datetime=2007-03-15>15 Mar 2007</time>.
  Work in progress.  The latest
  <abbr title="World Wide Web Consortium">W3C</abbr>‐published
  version of the specification is available at
  <code class=URI>&lt;<a href="http://www.w3.org/TR/xbl/">http://www.w3.org/TR/xbl/</a>></code>.</dd>
<dt id=ref-XML5>XML5</dt>
  <dd class=ed>@@</dd>
</dl>
</div>

</div>

</body>
</html>
